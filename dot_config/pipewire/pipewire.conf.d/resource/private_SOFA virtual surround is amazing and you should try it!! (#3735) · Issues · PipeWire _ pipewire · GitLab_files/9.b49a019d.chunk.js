(this.webpackJsonp=this.webpackJsonp||[]).push([[9],{FVJN:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n("Q33P"),o=n.n(r),s=(n("B++/"),n("z6RN"),n("47t/"),n("ZzK0"),n("BzOf"),n("oCX2")),i=n("EmJ/"),a=n.n(i),c=n("Jn9D"),l=n("NmEs"),u=n("G3fq"),d=n.n(u),h=(n("3UXl"),n("iyoE"),n("aFm2"),n("R9qC"),n("UezY"),n("hG7+"),n("ClPU")),f=n.n(h),p=(n("d8P8"),n("O4Ih")),g=n("0AwG"),m=n("/lV4"),b=n("p2yX");n("v2fZ");class v{constructor(t){this.data=t,this.columnWidths=[],this.rows=[],this.tableFound=this.parseTable()}isTable(){return this.tableFound}convertToTableMarkdown(){var t=this;this.calculateColumnWidths();const e=this.rows.map((function(e){return`| ${e.map((function(e,n){return t.formatColumn(e,n)})).join(" | ")} |`}));return e.splice(1,0,this.generateHeaderBreak()),e.join("\n")}parseTable(){if(!this.data.types.includes("text/html")||!this.data.types.includes("text/plain"))return!1;const t=this.data.getData("text/html");this.doc=(new DOMParser).parseFromString(t,"text/html");if(1!==this.doc.querySelectorAll("table:not(.diff-wrap-lines)").length)return!1;const e=this.data.getData("text/plain").trim().split(/[\n\u0085\u2028\u2029]|\r\n?/g);return this.doc.querySelectorAll("tr").length===e.length&&(this.rows=e.map((function(t){return t.split("\t")})),this.normalizeRows(),!!this.columnCountsMatch())}normalizeRows(){const t=this.rows.map((function(t){return t.length})),e=Math.max(...t);this.rows.forEach((function(t){for(;t.length<e;)t.push("")}))}calculateColumnWidths(){var t=this;this.columnWidths=this.rows[0].map((function(e,n){return function(t,e){return Math.max(...t.map((function(t){return t[e].length})))}(t.rows,n)}))}columnCountsMatch(){const t=this.rows[0].length;let e=0;return this.doc.querySelectorAll("table tr").forEach((function(t){e=Math.max(t.cells.length,e)})),t===e}formatColumn(t,e){return t+Array(this.columnWidths[e]-t.length+1).join(" ")}generateHeaderBreak(){var t=this;return`|${this.columnWidths.map((function(e,n){return Array(t.columnWidths[n]+3).join("-")})).join("|")}|`}}var x=n("2ibD"),w=n("Qhxq");function y(t,e={parallelUploads:2}){var n;const r=Object(l.O)("paperclip","div-dropzone-icon s24"),o=t.find(".attaching-file-message"),s=t.find(".button-cancel-uploading-files"),i=t.find(".retry-uploading-link"),c=t.find(".uploading-progress"),u=t.find(".uploading-error-container"),h=t.find(".uploading-error-message"),y=t.find(".uploading-progress-container"),S=t.data("uploads-path")||window.uploads_path||null,O=gon.max_file_size||10,j=t.find(".js-gfm-input");let E,k,C,z,M,A;j.wrap('<div class="div-dropzone"></div>');const D=j.closest(".md-area"),T=t.find(".div-dropzone");if(T.parent().addClass("div-dropzone-wrapper"),T.append('<div class="div-dropzone-hover"></div>'),T.find(".div-dropzone-hover").append(r),!S)return T.addClass("js-invalid-dropzone"),null;j.on("paste",(function(t){return E(t)}));const F=T.dropzone({url:S,dictDefaultMessage:"",clickable:null===(n=t.get(0).querySelector('[data-button-type="attach-file"]'))||void 0===n||n,paramName:"file",maxFilesize:O,uploadMultiple:!1,headers:w.a.headers,previewContainer:!1,...e,dragover:function(){D.addClass("is-dropzone-hover"),t.find(".div-dropzone-hover").css("opacity",.7)},dragleave:function(){D.removeClass("is-dropzone-hover"),t.find(".div-dropzone-hover").css("opacity",0)},drop:function(){D.removeClass("is-dropzone-hover"),t.find(".div-dropzone-hover").css("opacity",0),j.focus()},success(t,e){const n=this.getQueuedFiles().length+this.getUploadingFiles().length>=1;C(e.link.url,t.size),k(e.link.markdown,n)},error:function(t,e=Object(m.a)("Attaching the file failed."),n){const r=(o=e||n.responseText)&&"string"!=typeof o?o.message:o;var o;u.removeClass("hide"),h.html(r),s.addClass("hide")},totaluploadprogress(t){z(this.files,o),c.text(Math.round(t)+"%")},sending:function(){u.addClass("hide"),y.removeClass("hide"),s.removeClass("hide")},removedfile:function(){s.addClass("hide"),y.addClass("hide"),u.addClass("hide")},queuecomplete:function(){a()(".dz-preview").remove(),a()(".markdown-area").trigger("input"),y.addClass("hide"),s.addClass("hide")}}),R=a()(F[0]).children("textarea");s.on("click",(function(t){t.preventDefault(),t.stopPropagation(),f.a.forElement(T.get(0)).removeAllFiles(!0)})),i.on("click",(function(t){const e=f.a.forElement(t.target.closest(".js-main-target-form").querySelector(".div-dropzone")),n=e.files;t.preventDefault(),e.removeAllFiles(!0),n.map((function(t){const n=t;return n.status===f.a.ERROR&&(n.status=void 0,n.accepted=void 0),e.addFile(n)}))})),E=function(t){const e=t.originalEvent,{clipboardData:n}=e;if(n&&n.items){const r=new v(n);if(r.isTable()){t.preventDefault();const e=r.convertToTableMarkdown();k(e)}else if(!A(e)){[...n.files].forEach((function(e){if(-1!==e.type.indexOf("image")){t.preventDefault();const n=246,r=Object(p.b)(e)||"image.png",o=Object(g.C)(r,n);k(`{{${o}}}`),M(e,o)}}))}}},A=function(t){return[...t.clipboardData.items].some((function(t){return"text/plain"===t.type}))},k=function(t,e){let n=t;e&&(n+="\n\n");const r=R.get(0),o=r.selectionStart,s=r.selectionEnd,i=a()(R).val().length,c=a()(R).val().substring(0,o),l=a()(R).val().substring(s,i);return a()(R).val(c+n+l),r.setSelectionRange(o+n.length,s+n.length),r.style.height=r.scrollHeight+"px",j.get(0).dispatchEvent(new Event("input")),j.trigger("input")},C=function(e){a()(t).append(`<input type="hidden" name="files[]" value="${d()(e)}">`)};const H=function(){return y.addClass("hide")};function _(t){t.preventDefault(),a()(this).closest(".gfm-form").find(".div-dropzone").click(),j.focus()}M=function(t,e){const n=new FormData;n.append("file",t,e),y.removeClass("hide"),x.a.post(S,n).then((async function({data:n}){let r=n.link.markdown;const{width:o,height:s}=await Object(b.a)(t)||{};o&&s&&(r+=`{width=${o} height=${s}}`),function(t,e){const n=a()(R),r=n.get(0),o=r.selectionStart,s=r.selectionEnd,i=`{{${t}}}`;n.val((function(t,n){return n.replace(i,e)})),r.setSelectionRange(o-i.length+e.length,s-i.length+e.length),n.trigger("change")}(e,r),H()})).catch((function(t){var e;e=t.response.data.message,u.removeClass("hide"),h.html(e),H()}))},z=function(t,e){const n=t.filter((function(t){return"uploading"===t.status||"queued"===t.status})).length,r=Object(m.f)("Attaching a file","Attaching %d files",n);e.text(r+" -")},t.find(".markdown-selector").click(_);const q=t.find(".js-attach-file-button");return q.length&&q.get(0).addEventListener("click",_),T.get(0)?f.a.forElement(T.get(0)):null}f.a.autoDiscover=!1;var S=n("tXF7");class O{constructor(t,e={},n=!1,r={}){var s=this;this.form=t,this.textarea=this.form.find("textarea.js-gfm-input"),this.enableGFM={...c.b,...e};let i=gl.GfmAutoComplete&&gl.GfmAutoComplete.dataSources||{};o()(r)||(i=r),Object.keys(this.enableGFM).forEach((function(t){"emojis"===t||i[t]||(s.enableGFM[t]=!1)})),this.destroy(),this.setupForm(i,n),this.form.data("glForm",this)}destroy(){this.clearEventListeners(),this.autoComplete&&this.autoComplete.destroy(),this.formDropzone&&this.formDropzone.destroy(),this.form.data("glForm",null)}setupForm(t,e=!1){const n=this.form.is(":not(.gfm-form)")||e;this.form.removeClass("js-new-note-form"),n&&(this.form.find(".div-dropzone").remove(),this.form.addClass("gfm-form"),Object(l.i)(this.form.find(".js-note-text"),this.form.find(".js-comment-button, .js-note-new-discussion")),this.autoComplete=new c.a(t),this.autoComplete.setup(this.form.find(".js-gfm-input"),this.enableGFM),this.formDropzone=y(this.form,{parallelUploads:1}),this.form.is(":not(.js-no-autosize)")&&Object(s.a)(this.textarea)),this.addEventListeners(),Object(S.b)(this.form),this.form.show(),this.isAutosizeable&&this.setupAutosize(),!0===this.textarea.data("autofocus")&&this.textarea.focus()}updateAutocompleteDataSources(t){this.autoComplete&&this.autoComplete.updateDataSources(t)}setupAutosize(){var t=this;this.textarea.off("autosize:resized").on("autosize:resized",this.setHeightData.bind(this)),this.textarea.off("mouseup.autosize").on("mouseup.autosize",this.destroyAutosize.bind(this)),setTimeout((function(){Object(s.a)(t.textarea),t.textarea.css("resize","vertical")}),0)}setHeightData(){this.textarea.data("height",this.textarea.outerHeight())}destroyAutosize(){const t=this.textarea.outerHeight();this.textarea.data("height")!==t&&(s.a.destroy(this.textarea),this.textarea.data("height",t),this.textarea.outerHeight(t),this.textarea.css("max-height",window.outerHeight))}clearEventListeners(){this.textarea.off("focus"),this.textarea.off("blur"),Object(S.d)(this.form)}addEventListeners(){this.textarea.on("focus",(function(){a()(this).closest(".md-area").addClass("is-focused")})),this.textarea.on("blur",(function(){a()(this).closest(".md-area").removeClass("is-focused")}))}get supportsQuickActions(){return Boolean(this.textarea.data("supports-quick-actions"))}}},O4Ih:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return s})),e.a=function(t,e){const n=document.querySelector(t),r=document.querySelector(e);if(!n||!r)return;const o=n.closest("form");n.addEventListener("click",(function(){r.click()})),r.addEventListener("change",(function(){o.querySelector(".js-filename").textContent=r.value.replace(/^.*[\\\/]/,"")}))};const r=function(t){let e;return t&&(e=t.name),e},o=function(t){const e=t.name?t.name:"image.png";return/^[\w.\-+]+\.(png|jpg|jpeg|gif|bmp|tiff|ico|webp)$/.test(e)?e:"image.png"},s=function(t,e){const n=t.split("."),r="."+n[n.length-1];return e.includes(r)}},iIr1:function(t,e,n){"use strict";function r(t){return new Promise((function(e){const n=new FileReader;n.addEventListener("load",(function(t){return e(t.target.result)}),{once:!0}),n.readAsDataURL(t)}))}n.d(e,"a",(function(){return r}))},p2yX:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("3UXl"),n("iyoE"),n("E7T3"),n("MrC/");class r{constructor(t,e){this.x=t,this.y=e}eq(t,e){return this.x===t&&this.y===e}neq(t,e){return this.x!==t||this.y!==e}gte(t,e){return this.x>=t&&this.y>=e}gt(t,e){return this.x>t&&this.y>e}lte(t,e){return this.x<=t&&this.y<=e}lt(t,e){return this.x<t&&this.y<e}map(t){return new r(t(this.x),t(this.y))}mul(t){return new r(this.x*t,this.y*t)}div(t){return new r(this.x/t,this.y/t)}add(t,e){return new r(this.x+t,this.y+e)}sub(t,e){return new r(this.x-t,this.y-e)}round(){return new r(Math.round(this.x),Math.round(this.y))}floor(){return new r(Math.floor(this.x),Math.floor(this.y))}ceil(){return new r(Math.ceil(this.x),Math.ceil(this.y))}toSize(){return{width:this.x,height:this.y}}}var o=function(t,e){return new r(t,e)},s=n("iIr1");const i=function(t){const e=t.split("").map((function(t){return t.charCodeAt(0)}));return(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3]},a=async function(t){try{const e=await async function(t){if("image/png"!==t.type)return null;const e=await Object(s.a)(t);return atob(e.split(",")[1]).split("IDAT")[0]}(t),n=function(t){const e=t.indexOf("pHYs");if(-1===e)return null;const n=t.substring(e+4,e+4+9);return 1!==n.charCodeAt(8)?null:o(n.substring(0,4),n.substring(4,8)).map(i).div(39.3701).round()}(e);if(n.lte(72,72))return null;const r=e.substring(0,30).indexOf("IHDR");if(-1===r)return null;const a=e.substring(r+4,r+4+8);return o(a.substring(0,4),a.substring(4,8)).map(i).mul(72).div(Math.max(n.x,n.y)).ceil().toSize()}catch(t){return null}}},tXF7:function(t,e,n){"use strict";n.d(e,"c",(function(){return m})),n.d(e,"g",(function(){return b})),n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return j})),n.d(e,"d",(function(){return E})),n.d(e,"f",(function(){return k})),n.d(e,"e",(function(){return C}));n("lFMf"),n("gOHk"),n("c9hT"),n("3UXl"),n("iyoE"),n("ZzK0"),n("z6RN"),n("BzOf"),n("v2fZ"),n("B++/"),n("47t/");var r=n("EmJ/"),o=n.n(r),s=n("v+Mp"),i=n("NmEs"),a=n("2ibD");const c=/^(?<indent>\s*)(?<leader>((?<isUl>[*+-])|(?<isOl>\d+\.))( \[([xX~\s])\])?\s)(?<content>.)?/,l=/^((\s{0,3}-+\s*-+\s*-+\s*[\s-]*)|(\s{0,3}\*+\s*\*+\s*\*+\s*[\s*]*))$/;let u=!1;function d(t,e){return`${t}\n${e}\n${t}`}function h(t,e){let n=t.substring(e.selectionEnd);return n=n.replace(/^\n/,""),n=n.split("\n"),n[0]}function f(t){const e=t.value,{selectionStart:n,selectionEnd:r}=t;let o="\n"===e[n]?n-1:n;o=e.lastIndexOf("\n",o)+1;let s=r===n?r:r-1;s=e.indexOf("\n",s),s<0&&(s=e.length);return{lines:e.substring(o,s).split("\n"),selectionStart:n,selectionEnd:r,startPos:o,endPos:s}}function p(t,e,n,r,o,s){let i=Math.max(r,e+o),a=Math.max(r,n+s);e===n?a=i:e===r&&(i=r),t.setSelectionRange(i,a)}function g(t){return{start:{row:(e=t.getSelection()).startLineNumber,column:e.startColumn},end:{row:e.endLineNumber,column:e.endColumn}};var e}function m({textArea:t,text:e,tag:n,cursorOffset:r,blockTag:o,selected:s="",wrap:a,select:c,editor:l}){if(!n&&!o&&!s)return;let u,f,p,m,b=!1,v=!1,x=!1;if(s=s.toString(),l){const t=g(l);u=t.start,f=t.end}if("[{text}](url)"===n&&URL)try{const t=new URL(s);"null"===t.origin&&null!==t.origin||(n="[text]({text})",c="text")}catch(t){}0===s.indexOf("\n")&&(v=!0,s=s.replace(/\n+/,"")),t?t.selectionEnd-t.selectionStart>s.replace(/\n$/,"").length&&(b=!0,s=s.replace(/\n$/,"")):l&&u.row!==f.row&&(b=!0,s=s.replace(/\n$/,""));const w=s.split("\n");l&&!a?(p=l.getValue().split("\n")[u.row],/^\s*$/.test(p)&&(x=!0)):t&&!a&&(p=t.value.substr(0,t.selectionStart).lastIndexOf("\n"),/^\s*$/.test(t.value.substring(p,t.selectionStart))&&(x=!0));const y=t&&0===t.selectionStart||l&&0===u.column&&0===u.row,S=a||x||y?"":"\n";m=w.length>1&&(!a||null!=o&&""!==o)?null!=o&&""!==o?l?function(t,e,n,r){const o=t.split("\n"),s=g(r);if(o[s.start.row-1]===e&&o[s.end.row+1]===e){if(null!==e){const t=o[s.end.row+1],e=new Range(o[s.start.row-1],0,s.end.row+1,t.length);r.getSelection().setSelectionRange(e)}return n}return d(e,n)}(e,o,s,l):function(t,e,n,r){return function(t,e){let n=t.substring(0,e.selectionStart);n=n.split("\n");const r=n[n.length-2];return void 0===r?"":r}(t,e)===n&&h(t,e)===n?(null!=n&&(e.selectionStart=e.selectionStart-(n.length+1),e.selectionEnd=e.selectionEnd+(n.length+1)),r):d(n,r)}(e,t,o,s):w.map((function(t){return n.indexOf("{text}")>-1?n.replace("{text}",t):0===t.indexOf(n)?String(t.replace(n,"")):String(n)+t})).join("\n"):n.indexOf("{text}")>-1?n.replace("{text}",(function(){return s.replace(/\\n/g,"\n").replace(/%br/g,"\\n")})):String(S)+n+s+(a?n:""),v&&(m="\n"+m),b&&(m+="\n"),l?l.replaceSelectedText(m,c):Object(i.r)(t,m),function({textArea:t,tag:e,cursorOffset:n,positionBetweenTags:r,removedLastNewLine:o,select:s,editor:i,editorSelectionStart:a,editorSelectionEnd:c}){let l;if(!t||t.setSelectionRange){if(s&&s.length>0){if(t){const n=t.selectionStart-(e.length-e.indexOf(s)),r=n+s.length;return t.setSelectionRange(n,r)}if(i)return void i.selectWithinSelection(s,e)}if(t){if(t.selectionStart===t.selectionEnd)l=r?t.selectionStart-e.length:t.selectionStart,o&&(l-=1),n&&(l-=n),t.setSelectionRange(l,l)}else i&&a.row===c.row&&r&&i.moveCursor(-1*e.length)}}({textArea:t,tag:n.replace("{text}",s),cursorOffset:r,positionBetweenTags:a&&0===s.length,removedLastNewLine:b,select:c,editor:l,editorSelectionStart:u,editorSelectionEnd:f})}function b({textArea:t,tag:e,cursorOffset:n,blockTag:r,wrap:s,select:i,tagContent:a}){const c=o()(t);t=c.get(0);const l=c.val(),u=function(t,e){return t.substring(e.selectionStart,e.selectionEnd)}(l,t)||a;t.focus(),m({textArea:t,text:l,tag:e,cursorOffset:n,blockTag:r,selected:u,wrap:s,select:i}),t.click()}function v(t,e){if(!gon.markdown_automatic_lists)return;if("Enter"!==t.key)return;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;if(e.selectionStart!==e.selectionEnd)return;if(u)return;const n=f(e),r=n.lines[0],o=r.match(c);if(o){const{leader:s,indent:i,content:a,isOl:u}=o.groups,d=!a,f=s.length+i.length;if(n.selectionStart-n.startPos<f)return;if(d)return void(e.selectionStart=e.selectionStart-o[0].length);let p;if(u){p=function(t,e){var n;const{indent:r,leader:o}=t.groups,{indent:s,isOl:i}=null!==(n=null==e?void 0:e.groups)&&void 0!==n?n:{},[a,c=""]=o.split("."),l=i&&s===r?0:1;return`${r}${parseInt(a,10)+l}.${c}`}(o,h(e.value,e).match(c))}else{if(r.match(l))return;p=`${i}${s}`}p=p.replace(/\[[x~]\]/i,"[ ]"),t.preventDefault(),b({tag:p,textArea:e,blockTag:"",wrap:!1,select:"",tagContent:""})}}function x(t){var e,n;null!==(e=(n=o()(this)).atwho)&&void 0!==e&&e.call(n,"isSelecting")||(v(t,this),function(t,e){if(!gon.markdown_surround_selection)return;if(t.metaKey||t.ctrlKey)return;if(e.selectionStart===e.selectionEnd)return;const n={"*":"**{text}**",_:"_{text}_","`":"`{text}`","'":"'{text}'",'"':'"{text}"',"[":"[{text}]","{":"{{text}}","(":"({text})","<":"<{text}>"}[t.key];n&&(t.preventDefault(),b({tag:n,textArea:e,blockTag:"",wrap:!0,select:"",tagContent:""}))}(t,this))}function w(){u=!0}function y(){u=!1}function S(t){const e=t.closest(".md-area").find("textarea");if(e.length)switch(t.data("mdCommand")){case"indentLines":!function(t){const e=t.get(0),{lines:n,selectionStart:r,selectionEnd:o,startPos:s,endPos:a}=f(e),c=[];let l=0;e.focus(),e.setSelectionRange(s,a),n.forEach((function(t){t=" ".repeat(2)+t,l+=2,c.push(t)}));const u=c.join("\n");Object(i.r)(e,u),p(e,r,o,s,2,l)}(e);break;case"outdentLines":!function(t){const e=t.get(0),{lines:n,selectionStart:r,selectionEnd:o,startPos:s,endPos:a}=f(e),c=[];let l=0,u=-1,d=0;e.focus(),e.setSelectionRange(s,a),n.forEach((function(t){if(d=0,t.length>0){for(;d<2&&" "===t[d];)d+=1;d>0&&(t=t.slice(d),l+=d)}-1===u&&(u=d),c.push(t)}));const h=c.join("\n");l>0&&Object(i.r)(e,h),p(e,r,o,s,-u,-l)}(e);break;default:return b({textArea:e,tag:t.data("mdTag"),cursorOffset:t.data("mdCursorOffset"),blockTag:t.data("mdBlock"),wrap:!t.data("mdPrepend"),select:t.data("mdSelect"),tagContent:t.attr("data-md-tag-content")})}}function O(t){o()(".markdown-area",t).on("keydown",x).on("compositionstart",w).on("compositionend",y).each((function(){s.default.initMarkdownEditorShortcuts(o()(this),S)}));return o()(t).off("click",".js-md").on("click",".js-md",(function(){return S(o()(this))}))}function j(t){o()(".js-md").off("click").on("click",(function(e){const{mdTag:n,mdBlock:r,mdPrepend:s,mdSelect:i}=o()(e.currentTarget).data();m({tag:n,blockTag:r,wrap:!s,select:i,selected:t.getSelectedText(),text:t.getValue(),editor:t}),t.focus()}))}function E(t){return o()(".markdown-area",t).off("keydown",x).off("compositionstart",w).off("compositionend",y).each((function(){s.default.removeMarkdownEditorShortcuts(o()(this))})),o()(".js-md",t).off("click")}const k=async function(t,e=""){const{lines:n,startPos:r}=f(t);if(n>0)return null;const o=n[0];if(!/!\[.+?\]\(.+?\)/.test(o))return null;const s=t.selectionStart-r,i=o.substring(0,s).lastIndexOf("!"),c=o.substring(s).indexOf(")");if(i>=0&&c>=0){const t=o.substring(i,s+c+1),{data:n}=await a.a.post(e,{text:t}),r=(new DOMParser).parseFromString(n.body,"text/html").body.querySelector("a").getAttribute("href");if(r){const e=r.substring(r.lastIndexOf("/")+1);return{imageMarkdown:t,imageURL:r,filename:e}}}return null},C=function(t){var e;const n=Math.max(2,(null===(e=t.match(/```+/g))||void 0===e||null===(e=e.sort((function(t,e){return e.length-t.length}))[0])||void 0===e?void 0:e.length)||0)+1;return"`".repeat(n)}},"v+Mp":function(t,e,n){"use strict";n.r(e),n.d(e,"LOCAL_MOUSETRAP_DATA_KEY",(function(){return b})),n.d(e,"default",(function(){return x}));var r=n("8Doe"),o=n.n(r),s=(n("B++/"),n("z6RN"),n("47t/"),n("Tznw"),n("IYH6"),n("6yen"),n("OeRx"),n("l/dT"),n("RqS2"),n("Zy7a"),n("cjZU"),n("OAhk"),n("X42P"),n("mHhP"),n("fn0I"),n("UB/6"),n("imhG"),n("dHQd"),n("yoDG"),n("KeS/"),n("tWNI"),n("8d6S"),n("VwWG"),n("IYHS"),n("rIA9"),n("MViX"),n("zglm"),n("GDOA"),n("hlbI"),n("a0mT"),n("u3H1"),n("ta8/"),n("IKCR"),n("nmTw"),n("W2kU"),n("58fc"),n("7dtT"),n("Rhav"),n("uhEP"),n("eppl"),n("ZzK0"),n("BzOf"),n("EmJ/")),i=n.n(s),a=n("ewH8"),c=n("ygVz"),l=n("C83f"),u=n("O6Bj"),d=n("NmEs"),h=n("1OWu"),f=n("yQ8t"),p=n("3twG"),g=n("d08M"),m=n("wQDE");const b="local-mousetrap-instance";function v(t){const e=t.closest(".md-area").find(".js-md"),n=new Map;return e.each((function(){const t=i()(this),e=t.data("md-shortcuts");null!=e&&e.length&&n.set(t,e)})),n}class x{constructor(){var t;this.extensions=new Map,this.onToggleHelp=this.onToggleHelp.bind(this),this.helpModalElement=null,this.helpModalVueInstance=null,this.addAll([[g.vb,this.onToggleHelp],[g.sb,x.focusSearchFile],[g.rb,x.focusSearch],[g.d,this.focusFilter.bind(this)],[g.xb,x.onTogglePerfBar],[g.E,x.hideAppearingContent],[g.ub,x.onToggleCanary],[g.D,function(){return Object(f.a)(".shortcuts-todos")}],[g.e,function(){return Object(f.a)(".dashboard-shortcuts-activity")}],[g.y,function(){return Object(f.a)(".dashboard-shortcuts-issues")}],[g.z,function(){return Object(f.a)(".dashboard-shortcuts-merge_requests, .js-merge-request-dashboard-shortcut")}],[g.B,function(){return Object(f.a)(".dashboard-shortcuts-review_requests, .js-merge-request-dashboard-shortcut")}],[g.A,function(){return Object(f.a)(".dashboard-shortcuts-projects")}],[g.x,function(){return Object(f.a)(".dashboard-shortcuts-groups")}],[g.f,function(){return Object(f.a)(".dashboard-shortcuts-milestones")}],[g.C,function(){return Object(f.a)(".dashboard-shortcuts-snippets")}],[g.wb,x.toggleMarkdownPreview]]),Object(u.c)((function(t,e,n){return!Object(g.Ab)(g.wb).includes(n)&&void 0})),null!==(t=gon)&&void 0!==t&&null!==(t=t.features)&&void 0!==t&&t.findAndReplace&&(this.add(g.c,x.toggleFindAndReplaceBar),Object(u.c)((function(t,e,n){return!Object(g.Ab)(g.c).includes(n)&&void 0}))),i()(document).on("click",".js-shortcuts-modal-trigger",this.onToggleHelp),Object(m.b)()&&Object(m.a)()}addExtension(t,e=[],n=new Set){n.add(t);let r=this.extensions.get(t);if(!r){for(const e of null!==(o=t.dependencies)&&void 0!==o?o:[]){var o;n.has(e)||e===x||(n.add(e),this.addExtension(e,[],n))}r=new t(this,...e),this.extensions.set(t,r)}return n.delete(t),r}add(t,e){u.b.bind(Object(g.Ab)(t),e)}addAll(t){var e=this;t.forEach((function(t){return e.add(...t)}))}onToggleHelp(t){var e=this;null!=t&&t.preventDefault&&t.preventDefault(),this.helpModalElement&&this.helpModalVueInstance?(this.helpModalVueInstance.$destroy(),this.helpModalElement.remove(),this.helpModalElement=null,this.helpModalVueInstance=null):(this.helpModalElement=document.createElement("div"),document.body.append(this.helpModalElement),this.helpModalVueInstance=new a.default({el:this.helpModalElement,components:{ShortcutsHelp:function(){return Promise.all([n.e(882),n.e(1049)]).then(n.bind(null,"exIq"))}},render:function(t){return t("shortcuts-help",{on:{hidden:e.onToggleHelp}})}}))}static onTogglePerfBar(t){t.preventDefault();Object(d.H)(Object(d.j)("perf_bar_enabled"))?Object(d.N)("perf_bar_enabled","false",{path:"/"}):Object(d.N)("perf_bar_enabled","true",{path:"/"}),Object(p.F)()}static onToggleCanary(t){t.preventDefault();const e=Object(d.H)(Object(d.j)("gitlab_canary"));Object(d.N)("gitlab_canary",(!e).toString(),{expires:365,path:"/"}),Object(p.F)()}static toggleMarkdownPreview(t){i()(document).triggerHandler("markdown-preview:toggle",[t])}static toggleFindAndReplaceBar(t){i()(document).triggerHandler("markdown-editor:find-and-replace",[t])}focusFilter(t){this.filterInput||(this.filterInput=i()("input[type=search]",".nav-controls")),this.filterInput.focus(),t.preventDefault()}static focusSearch(t){var e;null===(e=document.querySelector("#super-sidebar-search"))||void 0===e||e.click(),c.a.trackEvent("press_keyboard_shortcut_to_activate_command_palette"),t.preventDefault&&t.preventDefault()}static async focusSearchFile(t){var e,n;null!=t&&t.key&&c.a.trackEvent(l.e),null==t||t.preventDefault(),null===(e=document.querySelector("#super-sidebar-search"))||void 0===e||e.click();const r=await Object(h.m)("#super-sidebar-search-modal #search");if(!r)return;const o=null===(n=document.querySelector(".js-repo-breadcrumbs"))||void 0===n?void 0:n.dataset.currentPath;r.value="~"+(o?o+"/":""),r.dispatchEvent(new Event("input"))}static hideAppearingContent(t){document.querySelectorAll(".tooltip, .popover").forEach((function(t){t.style.display="none"})),t.preventDefault&&t.preventDefault()}static initMarkdownEditorShortcuts(t,e){const n=v(t),r=new u.b(t[0]);t.data(b,r),n.forEach((function(t,n){r.bind(t,(function(t){t.preventDefault(),e(n)}))}));const s=o()([...n.values()]),i=u.b.prototype.stopCallback;r.stopCallback=function(t,e,n){return!s.includes(n)&&i.call(this,t,e,n)}}static removeMarkdownEditorShortcuts(t){const e=t.data(b);e&&v(t).forEach((function(t){e.unbind(t)}))}}}}]);
//# sourceMappingURL=9.b49a019d.chunk.js.map