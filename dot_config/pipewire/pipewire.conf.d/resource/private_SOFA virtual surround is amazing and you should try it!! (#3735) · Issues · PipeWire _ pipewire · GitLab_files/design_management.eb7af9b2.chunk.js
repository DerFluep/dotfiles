(this.webpackJsonp=this.webpackJsonp||[]).push([[265],{"+ZIf":function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"destroyDesign"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filenames"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designManagementDelete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"filenames"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"VersionListItem"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:289}};t.loc.source={body:'#import "../fragments/version.fragment.graphql"\n\nmutation destroyDesign($filenames: [String!]!, $projectPath: ID!, $iid: ID!) {\n  designManagementDelete(input: { projectPath: $projectPath, iid: $iid, filenames: $filenames }) {\n    version {\n      ...VersionListItem\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(n("yU3k").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)})));var s={};function o(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),s[e.name.value]=i}})),e.exports=t,e.exports.destroyDesign=function(e,i){var n={kind:e.kind,definitions:[o(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=s[i]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(i){var t=o(e,i);t&&n.definitions.push(t)})),n}(t,"destroyDesign")},"00Gr":function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:185}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n\nmutation updateNote($input: UpdateNoteInput!) {\n  updateNote(input: $input) {\n    note {\n      ...DesignNote\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(n("Vyjl").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)})));var s={};function o(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),s[e.name.value]=i}})),e.exports=t,e.exports.updateNote=function(e,i){var n={kind:e.kind,definitions:[o(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=s[i]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(i){var t=o(e,i);t&&n.definitions.push(t)})),n}(t,"updateNote")},"4v/w":function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:185}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n\nmutation createNote($input: CreateNoteInput!) {\n  createNote(input: $input) {\n    note {\n      ...DesignNote\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(n("Vyjl").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)})));var s={};function o(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),s[e.name.value]=i}})),e.exports=t,e.exports.createNote=function(e,i){var n={kind:e.kind,definitions:[o(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=s[i]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(i){var t=o(e,i);t&&n.definitions.push(t)})),n}(t,"createNote")},"7eAi":function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getDesignList"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"atVersion"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementVersionID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"designCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"copyState"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[{kind:"Argument",name:{kind:"Name",value:"atVersion"},value:{kind:"Variable",name:{kind:"Name",value:"atVersion"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageV432x230"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserTodos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"EnumValue",value:"pending"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:970}};n.loc.source={body:"query getDesignList($fullPath: ID!, $iid: String!, $atVersion: DesignManagementVersionID) {\n  project(fullPath: $fullPath) {\n    __typename\n    id\n    issue(iid: $iid) {\n      __typename\n      id\n      designCollection {\n        __typename\n        copyState\n        designs(atVersion: $atVersion) {\n          __typename\n          nodes {\n            __typename\n            id\n            event\n            filename\n            notesCount\n            image\n            imageV432x230\n            currentUserTodos(state: pending) {\n              __typename\n              nodes {\n                __typename\n                id\n              }\n            }\n          }\n        }\n        versions {\n          __typename\n          nodes {\n            __typename\n            id\n            sha\n            createdAt\n            author {\n              __typename\n              id\n              name\n              avatarUrl\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.getDesignList=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"getDesignList")},"9rT5":function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateDesignDescriptionMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementUpdateInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designManagementUpdate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"design"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"descriptionHtml"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:220}};n.loc.source={body:"mutation updateDesignDescriptionMutation($input: DesignManagementUpdateInput!) {\n  designManagementUpdate(input: $input) {\n    errors\n    design {\n      id\n      image\n      description\n      descriptionHtml\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.updateDesignDescriptionMutation=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"updateDesignDescriptionMutation")},BXQK:function(e,i,n){"use strict";var t=n("Pyw5");const a={name:"GlCard",props:{headerClass:{type:[String,Object,Array],required:!1,default:""},bodyClass:{type:[String,Object,Array],required:!1,default:""},footerClass:{type:[String,Object,Array],required:!1,default:""}}};const s=n.n(t)()({render:function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"gl-card"},[e.$scopedSlots.header?n("div",{staticClass:"gl-card-header",class:e.headerClass},[e._t("header")],2):e._e(),e._v(" "),n("div",{staticClass:"gl-card-body",class:e.bodyClass},[e._t("default")],2),e._v(" "),e.$scopedSlots.footer?n("div",{staticClass:"gl-card-footer",class:e.footerClass},[e._t("footer")],2):e._e()])},staticRenderFns:[]},void 0,a,void 0,!1,void 0,!1,void 0,void 0,void 0);i.a=s},DAN1:function(e,i,n){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignListItem"},directives:[]},{kind:"Field",name:{kind:"Name",value:"fullPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imported"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffRefs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignDiffRefs"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"discussions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replyId"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ResolvedStatus"},directives:[]},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:450}};t.loc.source={body:'#import "./design_note.fragment.graphql"\n#import "./design_list.fragment.graphql"\n#import "./diff_refs.fragment.graphql"\n#import "./discussion_resolved_status.fragment.graphql"\n\nfragment DesignItem on Design {\n  ...DesignListItem\n  fullPath\n  imported\n  diffRefs {\n    ...DesignDiffRefs\n  }\n  discussions {\n    nodes {\n      id\n      replyId\n      ...ResolvedStatus\n      notes {\n        nodes {\n          ...DesignNote\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)}))}t.definitions=t.definitions.concat(s(n("Vyjl").definitions)),t.definitions=t.definitions.concat(s(n("zCng").definitions)),t.definitions=t.definitions.concat(s(n("aMyH").definitions)),t.definitions=t.definitions.concat(s(n("Z+Gl").definitions));var o={};function r(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),o[e.name.value]=i}})),e.exports=t,e.exports.DesignItem=function(e,i){var n={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=o[i]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(i){var t=r(e,i);t&&n.definitions.push(t)})),n}(t,"DesignItem")},EFA5:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"todoMarkDone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TodoID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"todoMarkDone"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"todo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"mutation todoMarkDone($id: TodoID!) {\n  todoMarkDone(input: { id: $id }) {\n    errors\n    todo {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.todoMarkDone=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"todoMarkDone")},F875:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"activeDiscussion"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activeDiscussion"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"source"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:78}};n.loc.source={body:"query activeDiscussion {\n  activeDiscussion @client {\n    id\n    source\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.activeDiscussion=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"activeDiscussion")},JDjj:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createDesignTodo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"issueId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"designId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"issueIid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filenames"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"atVersion"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createDesignTodo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"Argument",name:{kind:"Name",value:"issueId"},value:{kind:"Variable",name:{kind:"Name",value:"issueId"}}},{kind:"Argument",name:{kind:"Name",value:"designId"},value:{kind:"Variable",name:{kind:"Name",value:"designId"}}},{kind:"Argument",name:{kind:"Name",value:"issueIid"},value:{kind:"Variable",name:{kind:"Name",value:"issueIid"}}},{kind:"Argument",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"filenames"}}},{kind:"Argument",name:{kind:"Name",value:"atVersion"},value:{kind:"Variable",name:{kind:"Name",value:"atVersion"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:348}};n.loc.source={body:"mutation createDesignTodo(\n  $projectPath: String!\n  $issueId: String!\n  $designId: String!\n  $issueIid: String!\n  $filenames: [String]!\n  $atVersion: String\n) {\n  createDesignTodo(\n    projectPath: $projectPath\n    issueId: $issueId\n    designId: $designId\n    issueIid: $issueIid\n    filenames: $filenames\n    atVersion: $atVersion\n  ) @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.createDesignTodo=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"createDesignTodo")},Js4L:function(e,i){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignNotePermissions"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotePermissions"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"adminNote"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repositionNote"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"awardEmoji"},arguments:[],directives:[]}]}}],loc:{start:0,end:96}};n.loc.source={body:"fragment DesignNotePermissions on NotePermissions {\n  adminNote\n  repositionNote\n  awardEmoji\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.DesignNotePermissions=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"DesignNotePermissions")},Lrng:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"designNoteNoteToggleAwardEmoji"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"awardableId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AwardableID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"awardEmojiToggle"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"awardableId"},value:{kind:"Variable",name:{kind:"Name",value:"awardableId"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"toggledOn"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:189}};n.loc.source={body:"mutation designNoteNoteToggleAwardEmoji($awardableId: AwardableID!, $name: String!) {\n  awardEmojiToggle(input: { awardableId: $awardableId, name: $name }) {\n    errors\n    toggledOn\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.designNoteNoteToggleAwardEmoji=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"designNoteNoteToggleAwardEmoji")},OR9K:function(e,i,n){"use strict";n("LdIe"),n("z6RN"),n("PTOk"),n("aFm2"),n("R9qC");var t=n("MV2A"),a=n("30su"),s=n("TU2v"),o=n("Pyw5"),r=n.n(o);const d={name:"GlAnimatedUploadIcon",extends:s.a};var l=r()({render:function(){var e=this.$createElement,i=this._self._c||e;return i("svg",{class:this.iconStateClass,attrs:{"aria-label":this.ariaLabel,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{staticClass:"gl-animated-upload-base",attrs:{d:"M14.25 9.75V13C14.25 13.6904 13.6904 14.25 13 14.25L3 14.25C2.30964 14.25 1.75 13.6904 1.75 13L1.75 9.75",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}}),this._v(" "),i("path",{staticClass:"gl-animated-upload-line",attrs:{d:"M8 11.25V2.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}}),this._v(" "),i("path",{staticClass:"gl-animated-upload-arrow",attrs:{d:"M11.25 5.31066L8 2.06066L4.75 5.31066",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}})])},staticRenderFns:[]},void 0,d,void 0,!1,void 0,!1,void 0,void 0,void 0),u=n("/lV4");const c="image/*",m=/image\/.+/;var g={components:{GlLink:t.a,GlSprintf:a.a,GlAnimatedUploadIcon:l},props:{displayAsCard:{type:Boolean,required:!1,default:!1},enableDragBehavior:{type:Boolean,required:!1,default:!1},uploadSingleMessage:{type:String,required:!1,default:Object(u.a)("Drop or %{linkStart}upload%{linkEnd} file to attach")},uploadMultipleMessage:{type:String,required:!1,default:Object(u.a)("Drop or %{linkStart}upload%{linkEnd} files to attach")},dropToStartMessage:{type:String,required:!1,default:Object(u.a)("Drop your files to start your upload.")},isFileValid:{type:Function,required:!1,default:function({type:e}){return(e.match(m)||[]).length>0}},validFileMimetypes:{type:Array,required:!1,default:function(){return[c]}},singleFileSelection:{type:Boolean,required:!1,default:!1},inputFieldName:{type:String,required:!1,default:"upload_file"},shouldUpdateInputOnFileDrop:{type:Boolean,required:!1,default:!1},showUploadDesignOverlay:{type:Boolean,required:!1,default:!1},uploadDesignOverlayText:{type:String,required:!1,default:""},validateDesignUploadOnDragover:{type:Boolean,required:!1,default:!1},acceptDesignFormats:{type:String,required:!1,default:""},hideUploadTextOnDragging:{type:Boolean,required:!1,default:!1}},data:()=>({dragCounter:0,isDragDataValid:!0,animateUploadIcon:!1}),computed:{dragging(){return 0!==this.dragCounter},iconStyles(){return{class:this.displayAsCard?"gl-mb-3":"gl-mr-3"}},validMimeTypeString(){return this.validFileMimetypes.join()},showDropzoneOverlay(){return this.validateDesignUploadOnDragover&&this.acceptDesignFormats?this.dragging&&this.isDragDataValid&&!this.enableDragBehavior:this.dragging&&!this.enableDragBehavior}},methods:{isValidUpload(e){return e.every(this.isFileValid)},isValidDragDataType:({dataTransfer:e})=>Boolean(e&&e.types.some((function(e){return"Files"===e}))),ondrop({dataTransfer:e={}}){if(this.dragCounter=0,!this.isDragDataValid)return;const{files:i}=e;if(this.isValidUpload(Array.from(i))){if(this.shouldUpdateInputOnFileDrop){if(this.singleFileSelection&&i.length>1)return void this.$emit("error");this.$refs.fileUpload.files=i}this.$emit("change",this.singleFileSelection?i[0]:i)}else this.$emit("error")},ondragenter(e){this.$emit("dragenter",e),this.dragCounter+=1,this.isDragDataValid=this.isValidDragDataType(e)},ondragover({dataTransfer:e}){var i=this;this.validateDesignUploadOnDragover&&(this.isDragDataValid=Array.from(e.items).some((function(e){return i.acceptDesignFormats.includes(e.type)})))},ondragleave(e){this.$emit("dragleave",e),this.dragCounter-=1},openFileUpload(){this.$refs.fileUpload.click()},onFileInputChange(e){this.$emit("change",this.singleFileSelection?e.target.files[0]:e.target.files)},onMouseEnter(){this.animateUploadIcon=!0},onMouseLeave(){this.animateUploadIcon=!1}}},v=n("tBpV"),f=Object(v.a)(g,(function(){var e=this,i=e._self._c;return i("div",{staticClass:"gl-w-full",class:{"gl-relative":!e.showUploadDesignOverlay},on:{dragstart:function(e){e.preventDefault(),e.stopPropagation()},dragend:function(e){e.preventDefault(),e.stopPropagation()},dragover:function(i){return i.preventDefault(),i.stopPropagation(),e.ondragover.apply(null,arguments)},dragenter:function(i){return i.preventDefault(),i.stopPropagation(),e.ondragenter.apply(null,arguments)},dragleave:function(i){return i.preventDefault(),i.stopPropagation(),e.ondragleave.apply(null,arguments)},drop:function(i){return i.preventDefault(),i.stopPropagation(),e.ondrop.apply(null,arguments)}}},[e._t("default",(function(){return[i("button",{staticClass:"card upload-dropzone-card upload-dropzone-border gl-mb-0 gl-h-full gl-w-full gl-items-center gl-justify-center gl-px-5 gl-py-4",attrs:{type:"button"},on:{click:e.openFileUpload,mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave}},[i("div",{staticClass:"gl-flex gl-items-center gl-justify-center gl-text-center",class:{"gl-flex-col":e.displayAsCard},attrs:{"data-testid":"dropzone-area"}},[i("gl-animated-upload-icon",{class:e.iconStyles.class,attrs:{"is-on":e.animateUploadIcon||e.hideUploadTextOnDragging}}),e._v(" "),e.hideUploadTextOnDragging&&e.dragging?e._e():i("p",{staticClass:"gl-mb-0",attrs:{"data-testid":"upload-text"}},[e._t("upload-text",(function(){return[i("gl-sprintf",{attrs:{message:e.singleFileSelection?e.uploadSingleMessage:e.uploadMultipleMessage},scopedSlots:e._u([{key:"link",fn:function({content:n}){return[i("gl-link",{on:{click:function(i){return i.stopPropagation(),e.openFileUpload.apply(null,arguments)}}},[e._v(e._s(n))])]}}],null,!1,40519920)})]}),{openFileUpload:e.openFileUpload})],2),e._v(" "),e.hideUploadTextOnDragging&&e.dragging?i("span",[e._v("\n          "+e._s(e.s__("DesignManagement|Drop your images to start the upload."))+"\n        ")]):e._e()],1)]),e._v(" "),i("input",{ref:"fileUpload",staticClass:"hide",attrs:{type:"file",name:e.inputFieldName,accept:e.validFileMimetypes,multiple:!e.singleFileSelection},on:{change:e.onFileInputChange}})]})),e._v(" "),i("transition",{attrs:{name:"upload-dropzone-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showDropzoneOverlay,expression:"showDropzoneOverlay"}],staticClass:"card gl-absolute gl-flex gl-h-full gl-w-full gl-items-center gl-justify-center gl-p-4",class:{"design-upload-dropzone-overlay gl-z-200 gl-border-1 gl-border-dashed gl-border-blue-500":e.showUploadDesignOverlay&&e.isDragDataValid,"upload-dropzone-overlay upload-dropzone-border":!e.showUploadDesignOverlay}},[e.showUploadDesignOverlay?[e.isDragDataValid&&!e.hideUploadTextOnDragging?i("div",{staticClass:"gl-absolute gl-bottom-6 gl-flex gl-items-center gl-rounded-base gl-bg-blue-950 gl-px-3 gl-py-2 gl-text-white",attrs:{"data-testid":"design-upload-overlay"}},[i("gl-animated-upload-icon",{attrs:{"is-on":!0,name:"upload"}}),e._v(" "),i("span",{staticClass:"gl-ml-2"},[e._v(e._s(e.uploadDesignOverlayText))])],1):e._e()]:[e.isDragDataValid?i("div",{staticClass:"gl-max-w-1/2 gl-text-center"},[e._t("valid-drag-data-slot",(function(){return[i("h3",{class:{"gl-inline gl-text-base":!e.displayAsCard}},[e._v("\n              "+e._s(e.__("Incoming!"))+"\n            ")]),e._v(" "),i("span",[e._v(e._s(e.dropToStartMessage))])]}))],2):i("div",{staticClass:"gl-max-w-1/2 gl-text-center"},[e._t("invalid-drag-data-slot",(function(){return[i("h3",{class:{"gl-inline gl-text-base":!e.displayAsCard}},[e._v("\n              "+e._s(e.__("Oh no!"))+"\n            ")]),e._v(" "),i("span",[e._v(e._s(e.__("You are trying to upload something other than an image. Please upload a .png, .jpg, .jpeg, .gif, .bmp, .tiff or .ico.")))])]}))],2)]],2)])],2)}),[],!1,null,null,null);i.a=f.exports},UESP:function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"uploadDesign"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"files"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Upload"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designManagementUpload"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"files"},value:{kind:"Variable",name:{kind:"Name",value:"files"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignItem"},directives:[]},{kind:"Field",name:{kind:"Name",value:"versions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"VersionListItem"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"skippedDesigns"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:449}};t.loc.source={body:'#import "../fragments/design.fragment.graphql"\n#import "../fragments/version.fragment.graphql"\n\nmutation uploadDesign($files: [Upload!]!, $projectPath: ID!, $iid: ID!) {\n  designManagementUpload(input: { projectPath: $projectPath, iid: $iid, files: $files }) {\n    designs {\n      ...DesignItem\n      versions {\n        nodes {\n          ...VersionListItem\n        }\n      }\n    }\n    skippedDesigns {\n      id\n      filename\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)}))}t.definitions=t.definitions.concat(s(n("DAN1").definitions)),t.definitions=t.definitions.concat(s(n("yU3k").definitions));var o={};function r(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),o[e.name.value]=i}})),e.exports=t,e.exports.uploadDesign=function(e,i){var n={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=o[i]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(i){var t=r(e,i);t&&n.definitions.push(t)})),n}(t,"uploadDesign")},Vyjl:function(e,i,n){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignNote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Note"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Author"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHtml"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imported"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"awardEmoji"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"diffRefs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignDiffRefs"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"y"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNotePermissions"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"discussion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:583}};t.loc.source={body:'#import "./diff_refs.fragment.graphql"\n#import "~/graphql_shared/fragments/author.fragment.graphql"\n#import "./note_permissions.fragment.graphql"\n\nfragment DesignNote on Note {\n  id\n  author {\n    ...Author\n  }\n  body\n  bodyHtml\n  createdAt\n  resolved\n  imported\n  awardEmoji {\n    nodes {\n      name\n      user {\n        id\n        name\n      }\n    }\n  }\n  position {\n    diffRefs {\n      ...DesignDiffRefs\n    }\n    x\n    y\n    height\n    width\n  }\n  userPermissions {\n    ...DesignNotePermissions\n  }\n  discussion {\n    id\n    notes {\n      nodes {\n        id\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)}))}t.definitions=t.definitions.concat(s(n("aMyH").definitions)),t.definitions=t.definitions.concat(s(n("5JsC").definitions)),t.definitions=t.definitions.concat(s(n("Js4L").definitions));var o={};function r(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),o[e.name.value]=i}})),e.exports=t,e.exports.DesignNote=function(e,i){var n={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=o[i]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(i){var t=r(e,i);t&&n.definitions.push(t)})),n}(t,"DesignNote")},Wthf:function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"repositionImageDiffNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RepositionImageDiffNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repositionImageDiffNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}}],loc:{start:0,end:224}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n\nmutation repositionImageDiffNote($input: RepositionImageDiffNoteInput!) {\n  repositionImageDiffNote(input: $input) {\n    errors\n    note {\n      ...DesignNote\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(n("Vyjl").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)})));var s={};function o(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),s[e.name.value]=i}})),e.exports=t,e.exports.repositionImageDiffNote=function(e,i){var n={kind:e.kind,definitions:[o(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=s[i]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(i){var t=o(e,i);t&&n.definitions.push(t)})),n}(t,"repositionImageDiffNote")},XmZ7:function(e,i){var n={kind:"Document",definitions:[{kind:"ObjectTypeDefinition",name:{kind:"Name",value:"ActiveDiscussion"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"id"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"FieldDefinition",name:{kind:"Name",value:"source"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}]},{kind:"ObjectTypeExtension",name:{kind:"Name",value:"Query"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"activeDiscussion"},arguments:[],type:{kind:"NamedType",name:{kind:"Name",value:"ActiveDiscussion"}},directives:[]}]},{kind:"ObjectTypeExtension",name:{kind:"Name",value:"Mutation"},interfaces:[],directives:[],fields:[{kind:"FieldDefinition",name:{kind:"Name",value:"updateActiveDiscussion"},arguments:[{kind:"InputValueDefinition",name:{kind:"Name",value:"id"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"InputValueDefinition",name:{kind:"Name",value:"source"},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}]}],loc:{start:0,end:198}};n.loc.source={body:"type ActiveDiscussion {\n  id: ID\n  source: String\n}\n\nextend type Query {\n  activeDiscussion: ActiveDiscussion\n}\n\nextend type Mutation {\n  updateActiveDiscussion(id: ID!, source: String!): Boolean\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"Y1Y+":function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getDesign"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"atVersion"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementVersionID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filenames"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"designCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[{kind:"Argument",name:{kind:"Name",value:"atVersion"},value:{kind:"Variable",name:{kind:"Name",value:"atVersion"}}},{kind:"Argument",name:{kind:"Name",value:"filenames"},value:{kind:"Variable",name:{kind:"Name",value:"filenames"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignItem"},directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Author"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createDesign"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateDesign"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:809}};t.loc.source={body:'#import "../fragments/design.fragment.graphql"\n#import "~/graphql_shared/fragments/author.fragment.graphql"\n\nquery getDesign(\n  $fullPath: ID!\n  $iid: String!\n  $atVersion: DesignManagementVersionID\n  $filenames: [String!]\n) {\n  project(fullPath: $fullPath) {\n    id\n    issue(iid: $iid) {\n      id\n      designCollection {\n        designs(atVersion: $atVersion, filenames: $filenames) {\n          nodes {\n            ...DesignItem\n            issue {\n              id\n              title\n              webPath\n              webUrl\n              participants {\n                nodes {\n                  ...Author\n                }\n              }\n              userPermissions {\n                createDesign\n                updateDesign\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)}))}t.definitions=t.definitions.concat(s(n("DAN1").definitions)),t.definitions=t.definitions.concat(s(n("5JsC").definitions));var o={};function r(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),o[e.name.value]=i}})),e.exports=t,e.exports.getDesign=function(e,i){var n={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=o[i]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(i){var t=r(e,i);t&&n.definitions.push(t)})),n}(t,"getDesign")},"Z+Gl":function(e,i){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ResolvedStatus"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Discussion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolvedBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:130}};n.loc.source={body:"fragment ResolvedStatus on Discussion {\n  id\n  resolvable\n  resolved\n  resolvedAt\n  resolvedBy {\n    id\n    name\n    webUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.ResolvedStatus=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"ResolvedStatus")},aMyH:function(e,i){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignDiffRefs"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DiffRefs"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"baseSha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startSha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headSha"},arguments:[],directives:[]}]}}],loc:{start:0,end:71}};n.loc.source={body:"fragment DesignDiffRefs on DiffRefs {\n  baseSha\n  startSha\n  headSha\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.DesignDiffRefs=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"DesignDiffRefs")},cfjj:function(e,i,n){var t=n("aEqC");e.exports=function(e){return function(i){return null==e?void 0:t(e,i)}}},d1ok:function(e,i){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignTodoItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserTodos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"EnumValue",value:"pending"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:119}};n.loc.source={body:"fragment DesignTodoItem on Design {\n  id\n  image\n  currentUserTodos(state: pending) {\n    nodes {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.DesignTodoItem=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"DesignTodoItem")},d6Vs:function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createImageDiffNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateImageDiffNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createImageDiffNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replyId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"noteable"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignTodoItem"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:502}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n#import "../fragments/design_todo_item.fragment.graphql"\n\nmutation createImageDiffNote($input: CreateImageDiffNoteInput!) {\n  createImageDiffNote(input: $input) {\n    note {\n      ...DesignNote\n      discussion {\n        id\n        replyId\n        noteable {\n          ... on Design {\n            ...DesignTodoItem\n          }\n        }\n        notes {\n          nodes {\n            ...DesignNote\n          }\n        }\n      }\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)}))}t.definitions=t.definitions.concat(s(n("Vyjl").definitions)),t.definitions=t.definitions.concat(s(n("d1ok").definitions));var o={};function r(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),o[e.name.value]=i}})),e.exports=t,e.exports.createImageDiffNote=function(e,i){var n={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=o[i]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(i){var t=r(e,i);t&&n.definitions.push(t)})),n}(t,"createImageDiffNote")},gS9Y:function(e,i,n){"use strict";n.r(i);n("byxs");var t=n("ewH8"),a=n("0ch9"),s=n("lnTC"),o=n("tBpV"),r=Object(o.a)({},(function(){return(0,this._self._c)("router-view")}),[],!1,null,null,null).exports,d=n("o4PY"),l=n.n(d),u=n("Oo2h"),c=n("b9Gi"),m=n("GiFX"),g=n("5v28"),v=n("2ibD"),f=n("F875"),p=n.n(f),h=n("Y1Y+"),k=n.n(h),b=n("XmZ7"),y=n.n(b),D=n("TGUZ"),S=n.n(D),N=(n("UezY"),n("z6RN"),n("hG7+"),n("aFm2"),n("R9qC"),n("3UXl"),n("iyoE"),n("B++/"),n("47t/"),n("jlnU")),w=n("4wgn"),_=n("/lV4");const E={mimetype:"image/*",regex:/image\/.+/},x="pin",F="discussion",C="url",I=["design-detail-layout","overflow-hidden","m-0"],P=Object(_.a)("Something went wrong when deleting a comment. Please try again."),O=function({type:e}){return(e.match(E.regex)||[]).length>0},T=function(e){return e.nodes.map((function(e,i){return{...e,index:i+1,notes:e.notes.nodes}}))},j=function(e){return(e.match("::Version/(.+$)")||[])[1]},V=function(e){return(e.match("Design/(.+$)")||[])[1]},$=function(e){return e.project.issue.designCollection.designs.nodes},M=function(e){return($(e)||[])[0]},A=function(e){const[,i]=e.match("#note_([0-9]+$)")||[];return i||null},q=function(e){return{__typename:"Mutation",designManagementUpload:{__typename:"DesignManagementUploadPayload",designs:e.map((function(e){return{__typename:"Design",id:-l()(),image:"",imageV432x230:"",description:"",descriptionHtml:"",filename:e.name,fullPath:"",notesCount:0,event:"NONE",currentUserTodos:{__typename:"TodoConnection",nodes:[]},diffRefs:{__typename:"DiffRefs",baseSha:"",startSha:"",headSha:""},discussions:{__typename:"DesignDiscussion",nodes:[]},versions:{__typename:"DesignVersionConnection",nodes:{__typename:"DesignVersion",id:-l()(),sha:-l()(),createdAt:"",author:{__typename:"UserCore",id:-l()(),name:"",avatarUrl:""}}}}})),skippedDesigns:[],errors:[]}}},L=function(e,{position:i}){return{__typename:"Mutation",repositionImageDiffNote:{__typename:"RepositionImageDiffNotePayload",note:{...e,position:{...e.position,...i}},errors:[]}}},U=function(){return document.querySelector(".layout-page")},R=function(e){return"gid://gitlab/Todo/"+e},B=Object(_.g)("DesignManagement|Could not add a new comment. Please try again."),z=Object(_.g)("DesignManagement|Could not create new discussion. Please try again."),G=Object(_.g)("DesignManagement|Could not update discussion. Please try again."),Q=Object(_.g)("DesignManagement|Could not update comment. Please try again."),H=Object(_.g)("DesignManagement|Could not delete comment. Please try again."),W=Object(_.g)("DesignManagement|Error uploading a new design. Please try again."),Y=Object(_.a)("Could not upload your designs as one or more files uploaded are not supported."),K=Object(_.a)("Could not find design."),X=Object(_.a)("Requested design version does not exist."),Z=Object(_.a)("Your update failed. You can only upload one design when dropping onto an existing design."),J=Object(_.a)("Your update failed. You must upload a file with the same file name when dropping onto an existing design."),ee=Object(_.a)("Something went wrong when reordering designs. Please try again"),ie=Object(_.a)("Failed to create a to-do item for the design."),ne=Object(_.a)("There is already a to-do item for this design."),te=Object(_.a)("Failed to remove a to-do item for the design."),ae=Object(_.a)("Failed to toggle the to-do status for the design."),se=Object(_.g)("DesignManagement|Upload skipped. %{reason}"),oe=function(e=1){return Object(_.f)("Failed to archive a design. Please try again.","Failed to archive designs. Please try again.",e)},re=function(e,i){if(0===i.length)return null;if(i.length===e.length){const{filename:e}=i[0],n=Object(_.h)(Object(_.f)("DesignManagement|%{filename} did not change.","DesignManagement|The designs you tried uploading did not change.",i.length),{filename:e});return Object(_.h)(se,{reason:n})}return function(e){const i=e.slice(0,5).map((function({filename:e}){return e})).join(", "),n=e.length>5?Object(_.h)(Object(_.g)("DesignManagement|Some of the designs you tried uploading did not change: %{skippedFiles} and %{moreCount} more."),{skippedFiles:i,moreCount:e.length-5}):Object(_.h)(Object(_.g)("DesignManagement|Some of the designs you tried uploading did not change: %{skippedFiles}."),{skippedFiles:i});return Object(_.h)(se,{reason:n})}(i)},de=Object(_.h)(Object(_.g)("DesignManagement|The maximum number of designs allowed to be uploaded is %{upload_limit}. Please try again."),{upload_limit:10}),le=Object(_.g)("DesignManagement|Could not update description. Please try again."),ue=function(e){return e.project.issue.designCollection.designs},ce=function(e,i){throw Object(N.createAlert)({message:i}),new Error(e.errors)},me=function({errors:e=[]}){return null==e?void 0:e.length},ge=function(e,i,n,t){me(i)?ce(i,oe(t.length)):(function(e,i,n){const t=e.readQuery(i),a=Object(c.a)(t,(function(e){const i=ue(t).nodes.filter((function(e){return!n.includes(e.filename)}));ue(e).nodes=[...i]}));e.writeQuery({...i,data:a})}(e,n,t),function(e,i,n){if(!n)return;const t=e.readQuery(i),a=Object(c.a)(t,(function(e){e.project.issue.designCollection.versions.nodes=[n,...e.project.issue.designCollection.versions.nodes]}));e.writeQuery({...i,data:a})}(e,n,i.version))},ve=function(e,i,n,t){me(i)?ce(i,z):function(e,i,n,t){const a=e.readQuery({query:n,variables:t}),s={__typename:w.p,id:i.note.discussion.id,replyId:i.note.discussion.replyId,resolvable:!0,resolved:!1,resolvedAt:null,resolvedBy:null,notes:{__typename:"NoteConnection",nodes:[i.note]}},o=Object(c.a)(a,(function(e){const n=M(e);n.notesCount+=1,n.discussions.nodes=[...n.discussions.nodes,s],n.issue.participants.nodes.some((function(e){return e.username===i.note.author.username}))||(n.issue.participants.nodes=[...n.issue.participants.nodes,{__typename:w.D,...i.note.author}])}));e.writeQuery({query:n,variables:t,data:o})}(e,i,n,t)},fe=function(e,i,n,t){me(i)?ce(i,G):function(e,i,n,t){const a=e.readQuery({query:n,variables:t}),s=Object(c.a)(a,(function(e){const n=M(e),t=(a=n.discussions,s=i.note.discussion.id,a.nodes.find((function(e){return e.id===s})));var a,s;t.notes={...t.notes,nodes:[i.note,...t.notes.nodes.slice(1)]}}));e.writeQuery({query:n,variables:t,data:s})}(e,i,n,t)},pe=function(e,i,n){me(i)?ce(i,i.errors[0]):function(e,i,n){const t=e.readQuery(n),a=Object(c.a)(t,(function(e){const n=$(e),t=S()(i.designs,n,"filename"),a=n.map((function(e){return i.designs.find((function(i){return i.filename===e.filename}))||e})).concat(t);let s;const o=i.designs.find((function(e){return e.versions}));if(o){const e=o.versions.nodes;e&&e.length&&(s=[e[0]])}const r={__typename:"DesignCollection",copyState:"READY",designs:{__typename:"DesignConnection",nodes:a},versions:{__typename:"DesignVersionConnection",nodes:[...s||[],...e.project.issue.designCollection.versions.nodes]}};e.project.issue.designCollection=r}));e.writeQuery({...n,data:a})}(e,i,n)},he=function(e,i,n){me(i)?Object(N.createAlert)({message:i.errors[0]}):function(e,i,n){const t=e.readQuery(n),a=Object(c.a)(t,(function(e){e.project.issue.designCollection.designs=i.designCollection.designs}));e.writeQuery({...n,data:a})}(e,i,n)},ke=function(e,i,n,t){me(i)?ce(i,te):function(e,i,n,t){const a=e.readQuery({query:n,variables:t}),{todo:{id:s}}=i,o=Object(c.a)(a,(function(e){var i;const n=M(e),t=(null===(i=n.currentUserTodos)||void 0===i?void 0:i.nodes)||[];n.currentUserTodos.nodes=t.filter((function({id:e}){return e!==s}))}));e.writeQuery({query:n,variables:t,data:o})}(e,i,n,t)};t.default.use(m.b);const be={Mutation:{updateActiveDiscussion:function(e,{id:i=null,source:n},{cache:t}){const a=t.readQuery({query:p.a}),s=Object(c.a)(a,(function(e){e.activeDiscussion={__typename:"ActiveDiscussion",id:i,source:n}}));t.writeQuery({query:p.a,data:s})},createDesignTodo:function(e,{projectPath:i,issueId:n,designId:t,issueIid:a,filenames:s,atVersion:o},{cache:r}){return v.a.post(`/${i}/todos`,{issue_id:n,issuable_id:t,issuable_type:"design"}).then((function({data:e}){const{delete_path:n}=e,t=(n.match("todos/([0-9]+$)")||[])[1];if(!t)return{errors:[{message:ne}]};const d=function(e){return{__typename:"Todo",id:R(e)}}(t);return function(e,i,n,t){const a=e.readQuery({query:n,variables:t}),s=Object(c.a)(a,(function(e){var n;const t=M(e),a=[...(null===(n=t.currentUserTodos)||void 0===n?void 0:n.nodes)||[],{...i,__typename:w.C}];t.currentUserTodos?t.currentUserTodos.nodes=a:t.currentUserTodos={__typename:"TodoConnection",nodes:a}}));e.writeQuery({query:n,variables:t,data:s})}(r,d,k.a,{fullPath:i,iid:a,filenames:s,atVersion:o}),d}))}}},ye=Object(g.b)(be,{cacheConfig:{dataIdFromObject:function(e){return"Design"===e.__typename?e.id&&e.image?`${e.id}-${e.image}`:l()():Object(u.b)(e)}},typeDefs:y.a});var De=new m.b({defaultClient:ye}),Se=n("lRsd"),Ne=(n("v2fZ"),n("Z0DX")),we=n.n(Ne),_e=n("dsWN"),Ee=n("O6Bj"),xe=n("d08M"),Fe=n("pgS/"),Ce=n("sHIo"),Ie=n("7eAi"),Pe=n.n(Ie),Oe=n("+ZIf"),Te=n.n(Oe),je={components:{ApolloMutation:m.a},inject:{projectPath:{default:""},iid:{from:"issueIid",defaut:""}},props:{filenames:{type:Array,required:!0}},computed:{projectQueryBody(){return{query:Pe.a,variables:{fullPath:this.projectPath,iid:this.iid,atVersion:null}}}},methods:{updateStoreAfterDelete(e,{data:{designManagementDelete:i}}){ge(e,i,this.projectQueryBody,this.filenames)}},destroyDesignMutation:Te.a},Ve=Object(o.a)(je,(function(){var e=this;return(0,e._self._c)("apollo-mutation",e._g({attrs:{mutation:e.$options.destroyDesignMutation,variables:{filenames:e.filenames,projectPath:e.projectPath,iid:e.iid},update:e.updateStoreAfterDelete,tag:null},scopedSlots:e._u([{key:"default",fn:function({mutate:i,loading:n,error:t}){return[e._t("default",null,null,{mutate:i,loading:n,error:t})]}}],null,!0)},e.$listeners))}),[],!1,null,null,null).exports,$e=n("4lAS"),Me=n("qLpH"),Ae=n("NmEs"),qe=n("FxFN"),Le=n("JTix"),Ue=n("0ENF"),Re=n("5c3i"),Be=n("ejAS"),ze={name:"DesignReplyForm",i18n:{primaryBtn:Object(_.g)("DesignManagement|Discard changes"),cancelBtnCreate:Object(_.g)("DesignManagement|Continue creating"),cancelBtnUpdate:Object(_.g)("DesignManagement|Continue editing"),cancelCreate:Object(_.g)("DesignManagement|Are you sure you want to cancel creating this comment?"),cancelUpdate:Object(_.g)("DesignManagement|Are you sure you want to cancel editing this comment?"),newCommentButton:Object(_.g)("DesignManagement|Comment"),updateCommentButton:Object(_.g)("DesignManagement|Save comment")},markdownDocsPath:Object(Me.a)("user/markdown"),components:{MarkdownEditor:Le.a,GlButton:$e.a,GlAlert:_e.a},props:{designNoteMutation:{type:Object,required:!0},mutationVariables:{type:Object,required:!1,default:null},markdownPreviewPath:{type:String,required:!1,default:""},isNewComment:{type:Boolean,required:!1,default:!0},isDiscussion:{type:Boolean,required:!1,default:!0},noteableId:{type:String,required:!0},discussionId:{type:String,required:!1,default:"new"},value:{type:String,required:!1,default:""}},data(){return{noteText:this.value,saving:!1,noteUpdateDirty:!1,isLoggedIn:Object(Ae.A)(),errorMessage:"",formFieldProps:{id:"design-reply",name:"design-reply","aria-label":Object(_.a)("Description"),placeholder:Object(_.a)("Write a comment…"),"data-testid":"note-textarea",class:"note-textarea js-gfm-input js-autosize markdown-area"}}},computed:{hasValue(){return this.noteText.length>0},buttonText(){return this.isNewComment?this.$options.i18n.newCommentButton:this.$options.i18n.updateCommentButton},shortDiscussionId(){return Object(qe.f)(this.discussionId)?Object(qe.e)(this.discussionId):this.discussionId},autosaveKey(){return this.isLoggedIn?[Object(_.g)("DesignManagement|Discussion"),Object(qe.e)(this.noteableId),this.shortDiscussionId].join("/"):""}},beforeDestroy(){var e=this;this.$nextTick((function(){Ue.a.$emit(Re.b,e.autosaveKey)}))},methods:{handleInput(){this.saving||(this.noteUpdateDirty=!0)},submitForm(){var e=this;this.hasValue&&(this.saving=!0,this.$apollo.mutate({mutation:this.designNoteMutation,variables:{input:{...this.mutationVariables,body:this.noteText}},update:function(){e.noteUpdateDirty=!1}}).then((function(i){e.$emit("note-submit-complete",i)})).catch((function(){e.errorMessage=e.getErrorMessage()})).finally((function(){e.saving=!1})))},getErrorMessage(){return this.isNewComment?this.isDiscussion?z:B:this.isDiscussion?G:Q},cancelComment(){this.hasValue&&this.noteUpdateDirty?this.confirmCancelCommentModal():(this.$emit("cancel-form"),this.noteUpdateDirty=!1)},async confirmCancelCommentModal(){const e=this.isNewComment?this.$options.i18n.cancelCreate:this.$options.i18n.cancelUpdate,i=this.isNewComment?this.$options.i18n.cancelBtnCreate:this.$options.i18n.cancelBtnUpdate;await Object(Be.a)(e,{primaryBtnText:this.$options.i18n.primaryBtn,cancelBtnText:i,primaryBtnVariant:"danger"})&&(this.$emit("cancel-form"),Ue.a.$emit(Re.b,this.autosaveKey))}}},Ge=Object(o.a)(ze,(function(){var e=this,i=e._self._c;return i("form",{staticClass:"new-note common-note-form",on:{submit:function(e){e.preventDefault()}}},[e.errorMessage?i("div",{staticClass:"gl-pb-3"},[i("gl-alert",{attrs:{variant:"danger"},on:{dismiss:function(i){e.errorMessage=null}}},[e._v("\n      "+e._s(e.errorMessage)+"\n    ")])],1):e._e(),e._v(" "),i("markdown-editor",{attrs:{autofocus:"","markdown-docs-path":e.$options.markdownDocsPath,"render-markdown-path":e.markdownPreviewPath,"enable-autocomplete":!0,"supports-quick-actions":!1,"form-field-props":e.formFieldProps},on:{input:e.handleInput,keydown:[function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:i.metaKey?e.submitForm.apply(null,arguments):null},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:i.ctrlKey?e.submitForm.apply(null,arguments):null},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:(i.stopPropagation(),e.cancelComment.apply(null,arguments))}]},model:{value:e.noteText,callback:function(i){e.noteText=i},expression:"noteText"}}),e._v(" "),e._t("resolve-checkbox"),e._v(" "),i("div",{staticClass:"note-form-actions !gl-mt-4 gl-flex"},[i("gl-button",{ref:"submitButton",staticClass:"gl-mr-3 !gl-w-auto",attrs:{disabled:!e.hasValue,loading:e.saving,category:"primary",variant:"confirm",type:"submit","data-track-action":"click_button","data-testid":"save-comment-button"},on:{click:e.submitForm}},[e._v("\n      "+e._s(e.buttonText)+"\n    ")]),e._v(" "),i("gl-button",{ref:"cancelButton",staticClass:"!gl-w-auto",attrs:{variant:"default",category:"primary"},on:{click:e.cancelComment}},[e._v(e._s(e.__("Cancel")))])],1)],2)}),[],!1,null,null,null).exports,Qe=n("h7kv"),He=n.n(Qe),We=n("FkSe"),Ye=n("Vjau"),Ke=n("kjIf"),Xe=n.n(Ke),Ze={name:"DesignOverlay",components:{DesignNotePin:Ye.a},props:{dimensions:{type:Object,required:!0},position:{type:Object,required:!0},notes:{type:Array,required:!1,default:function(){return[]}},currentCommentForm:{type:Object,required:!1,default:null},disableCommenting:{type:Boolean,required:!1,default:!1},resolvedDiscussionsExpanded:{type:Boolean,required:!0},disableNotes:{type:Boolean,required:!1,default:!1}},apollo:{activeDiscussion:{query:p.a}},data:()=>({movingNoteNewPosition:null,movingNoteStartPosition:null,activeDiscussion:{}}),computed:{overlayStyle(){return{cursor:this.disableCommenting?"unset":void 0,width:this.dimensions.width+"px",height:this.dimensions.height+"px",...this.position}},isMovingCurrentComment(){return Boolean(this.movingNoteStartPosition&&!this.movingNoteStartPosition.noteId)},currentCommentPositionStyle(){return this.isMovingCurrentComment&&this.movingNoteNewPosition?this.getNotePositionStyle(this.movingNoteNewPosition):this.getNotePositionStyle(this.currentCommentForm)},visibleNotes(){return this.resolvedDiscussionsExpanded?this.notes:this.notes.filter((function(e){return!e.resolved}))}},methods:{setNewNoteCoordinates({x:e,y:i}){this.$emit("openCommentForm",{x:e,y:i})},getNoteRelativePosition(e){const{x:i,y:n,width:t,height:a}=e,s=this.dimensions.width/t,o=this.dimensions.height/a;return{left:Math.round(i*s),top:Math.round(n*o)}},getNotePositionStyle(e){const{left:i,top:n}=this.getNoteRelativePosition(e);return{left:i+"px",top:n+"px"}},getMovingNotePositionDelta(e){let i=0,n=0;if(this.movingNoteStartPosition){const{clientX:t,clientY:a}=this.movingNoteStartPosition;i=e.clientX-t,n=e.clientY-a}return{deltaX:i,deltaY:n}},isMovingNote(e){var i;const n=null===(i=this.movingNoteStartPosition)||void 0===i?void 0:i.noteId;return Boolean(n&&n===e)},canMoveNote(e){const{userPermissions:i}=e,{repositionNote:n}=i||{};return Boolean(n)},isPositionInOverlay(e){const{top:i,left:n}=this.getNoteRelativePosition(e),{height:t,width:a}=this.dimensions;return i>=0&&i<=t&&n>=0&&n<=a},onNewNoteMove(e){if(!this.isMovingCurrentComment)return;const{deltaX:i,deltaY:n}=this.getMovingNotePositionDelta(e),t={x:this.currentCommentForm.x+i,y:this.currentCommentForm.y+n,width:this.dimensions.width,height:this.dimensions.height};this.isPositionInOverlay(t)?this.movingNoteNewPosition=t:this.onNewNoteMouseup()},onExistingNoteMove(e){var i=this;const n=this.notes.find((function({id:e}){return e===i.movingNoteStartPosition.noteId}));if(!n||!this.canMoveNote(n))return;const{position:t}=n,{width:a,height:s}=t,o=this.dimensions.width/a,r=this.dimensions.height/s,{deltaX:d,deltaY:l}=this.getMovingNotePositionDelta(e),u={x:t.x*o+d,y:t.y*r+l,width:this.dimensions.width,height:this.dimensions.height};this.isPositionInOverlay(u)?this.movingNoteNewPosition=u:this.onExistingNoteMouseup()},onNewNoteMouseup(){if(!this.movingNoteNewPosition)return;const{x:e,y:i}=this.movingNoteNewPosition;this.setNewNoteCoordinates({x:e,y:i})},onExistingNoteMouseup(e){if(!this.movingNoteStartPosition||!this.movingNoteNewPosition)return this.updateActiveDiscussion(e.id),void this.$emit("closeCommentForm");const{x:i,y:n}=this.movingNoteNewPosition;this.$emit("moveNote",{noteId:this.movingNoteStartPosition.noteId,discussionId:this.movingNoteStartPosition.discussionId,coordinates:{x:i,y:n}})},onNoteMousedown({clientX:e,clientY:i},n){this.movingNoteStartPosition={noteId:null==n?void 0:n.id,discussionId:null==n?void 0:n.discussion.id,clientX:e,clientY:i}},onOverlayMousemove(e){this.movingNoteStartPosition&&(this.isMovingCurrentComment?this.onNewNoteMove(e):this.onExistingNoteMove(e))},onNoteMouseup(e){this.movingNoteStartPosition&&(this.isMovingCurrentComment?this.onNewNoteMouseup():this.onExistingNoteMouseup(e),this.movingNoteStartPosition=null,this.movingNoteNewPosition=null)},onAddCommentMouseup({offsetX:e,offsetY:i}){this.disableCommenting||(this.activeDiscussion.id&&this.updateActiveDiscussion(),this.setNewNoteCoordinates({x:e,y:i}))},updateActiveDiscussion(e){this.$apollo.mutate({mutation:Xe.a,variables:{id:e,source:x}})},isNoteInactive(e){var i=this;const n=e.discussion.notes.nodes||[];return this.activeDiscussion.id&&!n.some((function({id:e}){return e===i.activeDiscussion.id}))}},i18n:{newCommentButtonLabel:Object(_.a)("Add comment to design")}},Je=Object(o.a)(Ze,(function(){var e=this,i=e._self._c;return i("div",{staticClass:"frame gl-absolute gl-left-0 gl-top-0",style:e.overlayStyle,attrs:{"data-testid":"design-overlay"},on:{mousemove:e.onOverlayMousemove,mouseleave:e.onNoteMouseup}},[i("button",{directives:[{name:"show",rawName:"v-show",value:!e.disableCommenting,expression:"!disableCommenting"}],staticClass:"gl-absolute gl-left-0 gl-top-0 gl-h-full gl-w-full gl-border-0 !gl-bg-transparent gl-p-0 gl-text-subtle !gl-shadow-none gl-outline-none hover:gl-cursor-crosshair",attrs:{type:"button",role:"button","aria-label":e.$options.i18n.newCommentButtonLabel,"data-testid":"design-image-button"},on:{mouseup:e.onAddCommentMouseup}}),e._v(" "),e.disableNotes?e._e():[e._l(e.visibleNotes,(function(n){return i("design-note-pin",{key:n.id,attrs:{label:n.index,position:e.isMovingNote(n.id)&&e.movingNoteNewPosition?e.getNotePositionStyle(e.movingNoteNewPosition):e.getNotePositionStyle(n.position),"is-inactive":e.isNoteInactive(n),"is-resolved":n.resolved,"is-on-image":"","data-testid":"note-pin"},on:{mousedown:function(i){return i.stopPropagation(),e.onNoteMousedown(i,n)},mouseup:function(i){return i.stopPropagation(),e.onNoteMouseup(n)}}})})),e._v(" "),e.currentCommentForm?i("design-note-pin",{attrs:{position:e.currentCommentPositionStyle,"data-testid":"comment-badge"},on:{mousedown:function(i){return i.stopPropagation(),e.onNoteMousedown.apply(null,arguments)},mouseup:function(i){return i.stopPropagation(),e.onNoteMouseup.apply(null,arguments)}}}):e._e()]],2)}),[],!1,null,null,null).exports,ei=n("s1D3"),ii={components:{GlIcon:ei.a},props:{image:{type:String,required:!1,default:""},name:{type:String,required:!1,default:""},scale:{type:Number,required:!1,default:1}},data:()=>({baseImageSize:null,imageStyle:null,imageError:!1}),watch:{scale(e){this.zoom(e)}},beforeDestroy(){window.removeEventListener("resize",this.resizeThrottled,!1)},mounted(){var e=this;this.image||this.onImgLoad(),this.resizeThrottled=He()((function(){e.setBaseImageSize()}),400),window.addEventListener("resize",this.resizeThrottled,!1)},methods:{onImgLoad(){requestIdleCallback(this.setBaseImageSize,{timeout:1e3}),requestIdleCallback(this.setImageNaturalScale,{timeout:1e3}),Object(s.a)({measures:[{name:a.a,start:a.b}]})},onImgError(){this.imageError=!0},setBaseImageSize(){const{contentImg:e}=this.$refs;e&&(0===e.offsetHeight||0===e.offsetWidth?this.baseImageSize={height:e.naturalHeight,width:e.naturalWidth}:this.baseImageSize={height:e.offsetHeight,width:e.offsetWidth},this.onResize({width:this.baseImageSize.width,height:this.baseImageSize.height}))},setImageNaturalScale(){const{contentImg:e}=this.$refs;if(!e)return;const{naturalHeight:i,naturalWidth:n}=e;if(0===i||0===n)return;const{height:t,width:a}=this.baseImageSize;this.imageStyle={width:a+"px",height:t+"px"},this.$parent.$emit("setMaxScale",Math.round((t+a)/(i+n)*100)/100)},onResize({width:e,height:i}){this.$emit("resize",{width:e,height:i})},zoom(e){var i=this;if(1===e)return this.imageStyle=null,void this.$nextTick((function(){i.setBaseImageSize()}));const n=this.baseImageSize.width*e,t=this.baseImageSize.height*e;this.imageStyle={width:n+"px",height:t+"px"},this.onResize({width:n,height:t})}}},ni=Object(o.a)(ii,(function(){var e=this,i=e._self._c;return i("div",{staticClass:"js-design-image gl-mx-auto gl-my-auto"},[e.imageError?i("gl-icon",{attrs:{name:"media-broken",size:48,variant:"disabled"}}):e._e(),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:!e.imageError,expression:"!imageError"}],ref:"contentImg",staticClass:"gl-border gl-max-h-full",class:{"img-fluid":!e.imageStyle},style:e.imageStyle,attrs:{src:e.image,alt:e.name},on:{error:e.onImgError,load:e.onImgLoad}})],1)}),[],!1,null,null,null).exports;var ti={components:{DesignImage:ni,DesignOverlay:Je,GlLoadingIcon:We.a},props:{image:{type:String,required:!1,default:""},imageName:{type:String,required:!1,default:""},discussions:{type:Array,required:!0},isAnnotating:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:1},resolvedDiscussionsExpanded:{type:Boolean,required:!0},isLoading:{type:Boolean,required:!0},disableCommenting:{type:Boolean,required:!0}},data:()=>({overlayDimensions:null,overlayPosition:null,currentAnnotationPosition:null,zoomFocalPoint:{x:0,y:0,width:0,height:0},initialLoad:!0,lastDragPosition:null,isDraggingDesign:!1,isLoggedIn:Object(Ae.A)()}),computed:{discussionStartingNotes(){return this.discussions.map((function(e){return{...e.notes[0],index:e.index}}))},currentCommentForm(){return this.isAnnotating&&this.currentAnnotationPosition||null},presentationStyle(){return{cursor:this.isDraggingDesign?"grabbing":void 0}}},beforeDestroy(){const{presentationViewport:e}=this.$refs;e&&e.removeEventListener("scroll",this.scrollThrottled,!1)},mounted(){var e=this;const{presentationViewport:i}=this.$refs;i&&(this.scrollThrottled=He()((function(){e.shiftZoomFocalPoint()}),400),i.addEventListener("scroll",this.scrollThrottled,!1))},methods:{syncCurrentAnnotationPosition(){if(!this.currentAnnotationPosition)return;const e=this.overlayDimensions.width/this.currentAnnotationPosition.width,i=this.overlayDimensions.height/this.currentAnnotationPosition.height,n=this.currentAnnotationPosition.x*e,t=this.currentAnnotationPosition.y*i;this.currentAnnotationPosition=this.getAnnotationPositon({x:n,y:t})},setOverlayDimensions(e){this.overlayDimensions=e,this.syncCurrentAnnotationPosition()},setOverlayPosition(){this.overlayDimensions||(this.overlayPosition={});const{presentationViewport:e}=this.$refs;e&&(this.overlayPosition={left:`calc(50% - ${this.overlayDimensions.width/2}px)`,top:`calc(50% - ${this.overlayDimensions.height/2}px)`},this.overlayDimensions.width>e.offsetWidth&&(this.overlayPosition.left="0"),this.overlayDimensions.height>e.offsetHeight&&(this.overlayPosition.top="0"))},getViewportCenter(){const{presentationViewport:e}=this.$refs;if(!e)return{};const i=e.scrollWidth-e.offsetWidth,n=e.scrollHeight-e.offsetHeight,t=e.scrollLeft>0?e.scrollLeft/i:0,a=e.scrollTop>0?e.scrollTop/n:0,s=(e.scrollWidth-e.offsetWidth-0)*t,o=(e.scrollHeight-e.offsetHeight-0)*a;return{x:e.offsetWidth/2+s,y:e.offsetHeight/2+o}},scrollToFocalPoint(){const{presentationViewport:e}=this.$refs;if(!e)return;const i=this.zoomFocalPoint.x-e.offsetWidth/2,n=this.zoomFocalPoint.y-e.offsetHeight/2;e.scrollTo(i,n)},scaleZoomFocalPoint(){const{x:e,y:i,width:n,height:t}=this.zoomFocalPoint,a=this.overlayDimensions.width/n,s=this.overlayDimensions.height/t;this.zoomFocalPoint={x:Math.round(e*a*100)/100,y:Math.round(i*s*100)/100,...this.overlayDimensions}},shiftZoomFocalPoint(){this.zoomFocalPoint={...this.getViewportCenter(),...this.overlayDimensions}},onImageResize(e){var i=this;this.setOverlayDimensions(e),this.setOverlayPosition(),this.$nextTick((function(){i.initialLoad?(i.shiftZoomFocalPoint(),i.initialLoad=!1):(i.scaleZoomFocalPoint(),i.scrollToFocalPoint())}))},getAnnotationPositon(e){const{x:i,y:n}=e,{width:t,height:a}=this.overlayDimensions;return{x:Math.round(i),y:Math.round(n),width:Math.round(t),height:Math.round(a)}},openCommentForm(e){this.currentAnnotationPosition=this.getAnnotationPositon(e),this.$emit("openCommentForm",this.currentAnnotationPosition)},closeCommentForm(){this.currentAnnotationPosition=null,this.$emit("closeCommentForm")},moveNote({noteId:e,discussionId:i,coordinates:n}){const t=this.getAnnotationPositon(n);this.$emit("moveNote",{noteId:e,discussionId:i,position:t})},onPresentationMousedown({clientX:e,clientY:i}){this.isDesignOverflowing()&&(this.lastDragPosition={x:e,y:i})},getDragDelta(e,i){return{deltaX:this.lastDragPosition.x-e,deltaY:this.lastDragPosition.y-i}},exceedsDragThreshold(e,i){const{deltaX:n,deltaY:t}=this.getDragDelta(e,i);return Math.abs(n)>2||Math.abs(t)>2},shouldDragDesign(e,i){return this.lastDragPosition&&(this.isDraggingDesign||this.exceedsDragThreshold(e,i))},onPresentationMousemove({clientX:e,clientY:i}){const{presentationViewport:n}=this.$refs;if(!n||!this.shouldDragDesign(e,i))return;this.isDraggingDesign=!0;const{scrollLeft:t,scrollTop:a}=n,{deltaX:s,deltaY:o}=this.getDragDelta(e,i);n.scrollTo(t+s,a+o),this.lastDragPosition={x:e,y:i}},onPresentationMouseup(){this.lastDragPosition=null,this.isDraggingDesign=!1},isDesignOverflowing(){const{presentationViewport:e}=this.$refs;return!!e&&(e.scrollWidth>e.offsetWidth||e.scrollHeight>e.offsetHeight)}}},ai=Object(o.a)(ti,(function(){var e=this,i=e._self._c;return i("div",{ref:"presentationViewport",staticClass:"overflow-auto gl-relative gl-h-full gl-w-full gl-p-5",style:e.presentationStyle,on:{mousedown:e.onPresentationMousedown,mousemove:e.onPresentationMousemove,mouseup:e.onPresentationMouseup,mouseleave:e.onPresentationMouseup,touchstart:e.onPresentationMousedown,touchmove:e.onPresentationMousemove,touchend:e.onPresentationMouseup,touchcancel:e.onPresentationMouseup}},[e.isLoading?i("gl-loading-icon",{staticClass:"gl-flex gl-h-full gl-items-center",attrs:{size:"xl"}}):i("div",{staticClass:"gl-relative gl-flex gl-h-full gl-w-full gl-items-center"},[e.image?i("design-image",{attrs:{image:e.image,name:e.imageName,scale:e.scale},on:{resize:e.onImageResize}}):e._e(),e._v(" "),e.overlayDimensions&&e.overlayPosition?i("design-overlay",{attrs:{dimensions:e.overlayDimensions,position:e.overlayPosition,notes:e.discussionStartingNotes,"current-comment-form":e.currentCommentForm,"disable-commenting":!e.isLoggedIn||e.isDraggingDesign||e.disableCommenting,"disable-notes":e.disableCommenting,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded},on:{openCommentForm:e.openCommentForm,closeCommentForm:e.closeCommentForm,moveNote:e.moveNote}}):e._e()],1)],1)}),[],!1,null,null,null).exports,si=n("1fc5");var oi={components:{GlButtonGroup:si.a,GlButton:$e.a},props:{maxScale:{type:Number,required:!0}},data:()=>({scale:1}),computed:{disableDecrease(){return 1===this.scale},disableIncrease(){return this.scale>=this.maxScale},stepSize(){return(this.maxScale-1)/5},scaleLabel(){return Object(_.h)(Object(_.a)("%{scaleValue}%%"),{scaleValue:Math.ceil(100*this.scale)})}},methods:{setScale(e){e<1||(this.scale=Math.round(100*e)/100,this.$emit("scale",this.scale))},incrementScale(){this.setScale(Math.min(this.scale+this.stepSize,this.maxScale))},decrementScale(){this.setScale(Math.max(this.scale-this.stepSize,1))}}},ri=Object(o.a)(oi,(function(){var e=this,i=e._self._c;return i("gl-button-group",{staticClass:"gl-z-1"},[i("gl-button",{attrs:{icon:"dash",disabled:e.disableDecrease,"aria-label":e.__("Decrease")},on:{click:e.decrementScale}}),e._v(" "),i("span",{staticClass:"gl-border-t gl-border-b gl-bg-white gl-p-3 gl-text-sm",attrs:{"data-testid":"scale-value"}},[e._v(e._s(e.scaleLabel))]),e._v(" "),i("gl-button",{attrs:{icon:"plus",disabled:e.disableIncrease,"aria-label":e.__("Increase")},on:{click:e.incrementScale}})],1)}),[],!1,null,null,null).exports,di=n("UKdF"),li=n("nbHk"),ui=n("4+8U"),ci=n("dsLq"),mi=n("EvrX"),gi=n("vkYZ"),vi=n("MV2A"),fi=n("SeSR"),pi=n("z1xw"),hi=n("7F3p"),ki=n("oz03"),bi=n("h/fo"),yi=n("Fsq/"),Di=n("4v/w"),Si=n.n(Di),Ni=n("n2Xr"),wi=n.n(Ni),_i=n("hLTK"),Ei=n.n(_i),xi={apollo:{allVersions:{query:Pe.a,variables(){return{fullPath:this.projectPath,iid:this.issueIid,atVersion:null}},update:function(e){return e.project.issue.designCollection.versions.nodes}}},inject:{projectPath:{default:""},issueIid:{default:""}},computed:{hasValidVersion(){var e=this;return this.$route.query.version&&this.allVersions&&this.allVersions.some((function(i){return i.id.endsWith(e.$route.query.version)}))},designsVersion(){return this.hasValidVersion?"gid://gitlab/DesignManagement::Version/"+this.$route.query.version:null},latestVersionId(){const e=this.allVersions[0];return e&&j(e.id)},isLatestVersion(){return!(this.allVersions.length>0)||(!this.$route.query.version||!this.latestVersionId||this.$route.query.version===this.latestVersionId)}},data:()=>({allVersions:[]})},Fi=n("Q33P"),Ci=n.n(Fi),Ii=n("tbP8"),Pi=n("mFhR"),Oi=n("Bo17"),Ti=n("Mp8J"),ji=n("3twG"),Vi=n("AuBS"),$i=n("OgyL"),Mi=n("YH60"),Ai=n("HZAj"),qi=n("00Gr"),Li=n.n(qi),Ui=n("Lrng"),Ri=n.n(Ui),Bi={components:{AwardsList:n("NbhA").a},props:{awards:{type:Array,required:!0},canAwardEmoji:{type:Boolean,required:!0}},computed:{currentUserId:()=>window.gon.current_user_id}},zi=Object(o.a)(Bi,(function(){var e=this;return(0,e._self._c)("awards-list",{staticClass:"gl-mt-5 gl-px-2",attrs:{awards:e.awards,"can-award-emoji":e.canAwardEmoji,"current-user-id":e.currentUserId},on:{award:function(i){return e.$emit("award",i)}}})}),[],!1,null,null,null).exports,Gi={i18n:{editCommentLabel:Object(_.a)("Edit comment"),moreActionsLabel:Object(_.a)("More actions"),deleteCommentText:Object(_.a)("Delete comment"),copyCommentLink:Object(_.a)("Copy link")},components:{DesignNoteAwardsList:zi,DesignReplyForm:Ge,EmojiPicker:Mi.default,GlAvatar:Ii.a,GlAvatarLink:Pi.a,GlButton:$e.a,GlDisclosureDropdown:Oi.a,GlLink:vi.a,ImportedBadge:Vi.a,TimeAgoTooltip:yi.a,TimelineEntryItem:$i.a},directives:{GlTooltip:pi.a,SafeHtml:Ti.a},inject:["issueIid","projectPath"],props:{note:{type:Object,required:!0},markdownPreviewPath:{type:String,required:!1,default:""},isDiscussion:{type:Boolean,required:!1,default:!1},noteableId:{type:String,required:!0},designVariables:{type:Object,required:!0}},data:()=>({isEditing:!1,isError:!0}),computed:{currentUserId:()=>window.gon.current_user_id,currentUserFullName:()=>window.gon.current_user_fullname,canAwardEmoji(){return this.note.userPermissions.awardEmoji},awards(){return this.note.awardEmoji.nodes.map((function(e){return{...e,user:{...e.user,id:Object(qe.e)(e.user.id)}}}))},author(){return this.note.author||{}},hasAuthor(){return!Ci()(this.author)},authorId(){return Object(qe.e)(this.author.id)},noteAnchorId(){return(this.note.id.match("DiffNote/(.+$)")||[])[1]},isNoteLinked(){return A(this.$route.hash)===this.noteAnchorId},mutationVariables(){return{id:this.note.id}},isEditingAndHasPermissions(){return!this.isEditing&&this.adminPermissions},isImported(){return this.note.imported},adminPermissions(){return this.note.userPermissions.adminNote},dropdownItems(){var e=this;return[{text:this.$options.i18n.editCommentLabel,action:function(){e.isEditing=!0},extraAttrs:{class:"sm:!gl-hidden"}},{text:this.$options.i18n.copyCommentLink,action:function(){e.$toast.show(Object(_.a)("Link copied to clipboard."))},extraAttrs:{"data-clipboard-text":Object(ji.K)(window.location.href,"note_"+this.noteAnchorId)}},{text:this.$options.i18n.deleteCommentText,action:function(){e.$emit("delete-note",e.note)},extraAttrs:{class:"!gl-text-red-500"}}]}},methods:{hideForm(){this.isEditing=!1},onDone({data:e}){this.hideForm(),me(e.updateNote)&&this.$emit("error",e.errors[0])},isEmojiPresentForCurrentUser(e){var i=this;return this.awards.findIndex((function(n){return n.name===e&&n.user.id===i.currentUserId}))>-1},getAwardEmojiNodes(e,i){var n=this;if(i){if(this.isEmojiPresentForCurrentUser(e))return this.note.awardEmoji.nodes;const i=[...this.note.awardEmoji.nodes];return i.push({name:e,__typename:"AwardEmoji",user:{id:Object(qe.c)(w.D,this.currentUserId),name:this.currentUserFullName,__typename:"UserCore"}}),i}return this.note.awardEmoji.nodes.filter((function(i){return!(i.name===e&&Object(qe.e)(i.user.id)===n.currentUserId)}))},handleAwardEmoji(e){var i=this;this.$apollo.mutate({mutation:Ri.a,variables:{name:e,awardableId:this.note.id},optimisticResponse:{awardEmojiToggle:{errors:[],toggledOn:!this.isEmojiPresentForCurrentUser(e)}},update:function(n,{data:{awardEmojiToggle:{toggledOn:t}}}){const a={query:k.a,variables:i.designVariables},s=n.readQuery(a),o=Object(c.b)(s,(function(n){const{awardEmoji:a}=n.project.issue.designCollection.designs.nodes[0].discussions.nodes.find((function(e){return e.id===i.note.discussion.id})).notes.nodes.find((function(e){return e.id===i.note.id}));a.nodes=i.getAwardEmojiNodes(e,t)}));n.writeQuery({...a,data:o})}}).catch((function(e){hi.b(e),i.$emit("error",e)}))}},updateNoteMutation:Li.a,TYPE_COMMENT:Ai.d},Qi=Object(o.a)(Gi,(function(){var e=this,i=e._self._c;return i("timeline-entry-item",{staticClass:"design-note note-form",attrs:{id:"note_"+e.noteAnchorId}},[i("gl-avatar-link",{staticClass:"link-inherit-color js-user-link gl-float-left gl-mr-3",attrs:{href:e.author.webUrl,"data-user-id":e.authorId,"data-username":e.author.username}},[i("gl-avatar",{attrs:{size:32,src:e.author.avatarUrl,"entity-name":e.author.username}})],1),e._v(" "),i("div",{staticClass:"gl-flex gl-justify-between"},[i("div",[e.hasAuthor?e._m(0):i("span",[e._v(e._s(e.__("A deleted user")))]),e._v(" "),i("span",{staticClass:"note-headline-light note-headline-meta"},[i("span",{staticClass:"system-note-message"},[e._t("default")],2),e._v(" "),i("gl-link",{staticClass:"note-timestamp system-note-separator link-inherit-color gl-mb-2 gl-inline-block gl-text-sm",attrs:{href:"#note_"+e.noteAnchorId}},[i("time-ago-tooltip",{attrs:{time:e.note.createdAt,"tooltip-placement":"bottom"}})],1),e._v(" "),e.isImported?i("imported-badge",{attrs:{"importable-type":e.$options.TYPE_COMMENT}}):e._e()],1)],1),e._v(" "),i("div",{staticClass:"-gl-mr-2 -gl-mt-2 gl-flex gl-items-start"},[e._t("resolve-discussion"),e._v(" "),e.canAwardEmoji?i("emoji-picker",{attrs:{"toggle-class":"add-reaction-button btn-default-tertiary",right:!1,"data-testid":"note-emoji-button"},on:{click:e.handleAwardEmoji}}):e._e(),e._v(" "),e.isEditingAndHasPermissions?i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"gl-hidden sm:!gl-flex",attrs:{"aria-label":e.$options.i18n.editCommentLabel,title:e.$options.i18n.editCommentLabel,category:"tertiary","data-testid":"note-edit",icon:"pencil"},on:{click:function(i){e.isEditing=!0}}}):e._e(),e._v(" "),e.isEditingAndHasPermissions?i("gl-disclosure-dropdown",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],attrs:{icon:"ellipsis_v",category:"tertiary","text-sr-only":"",title:e.$options.i18n.moreActionsLabel,"aria-label":e.$options.i18n.moreActionsLabel,"no-caret":"",left:"",items:e.dropdownItems,"data-testid":"more-actions"}}):e._e()],2)]),e._v(" "),e.isEditing?e._e():[i("div",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.note.bodyHtml,expression:"note.bodyHtml"}],staticClass:"note-text md",attrs:{"data-testid":"note-text"}}),e._v(" "),e._t("resolved-status")],e._v(" "),e.awards.length?i("design-note-awards-list",{attrs:{awards:e.awards,"can-award-emoji":e.note.userPermissions.awardEmoji},on:{award:e.handleAwardEmoji}}):e._e(),e._v(" "),e.isEditing?i("design-reply-form",{staticClass:"gl-mt-5",attrs:{"markdown-preview-path":e.markdownPreviewPath,"design-note-mutation":e.$options.updateNoteMutation,"mutation-variables":e.mutationVariables,value:e.note.body,"is-new-comment":!1,"is-discussion":e.isDiscussion,"noteable-id":e.noteableId},on:{"note-submit-complete":e.onDone,"cancel-form":e.hideForm}}):e._e()],2)}),[function(){var e=this,i=e._self._c;return i("gl-link",{staticClass:"js-user-link link-inherit-color",attrs:{href:e.author.webUrl,"data-testid":"user-link","data-user-id":e.authorId,"data-username":e.author.username}},[i("span",{staticClass:"note-header-author-name gl-font-bold"},[e._v(e._s(e.author.name))]),e._v(" "),e.author.status_tooltip_html?i("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.author.status_tooltip_html,expression:"author.status_tooltip_html"}]}):e._e(),e._v(" "),i("span",{staticClass:"note-headline-light"},[e._v("@"+e._s(e.author.username))])])}],!1,null,null,null).exports,Hi=n("30su"),Wi={components:{GlSprintf:Hi.a,GlLink:vi.a},props:{registerPath:{type:String,required:!0},signInPath:{type:String,required:!0},isAddDiscussion:{type:Boolean,required:!1,default:!1}},computed:{signedOutText(){return this.isAddDiscussion?Object(_.a)("Please %{registerLinkStart}register%{registerLinkEnd} or %{signInLinkStart}sign in%{signInLinkEnd} to start a new discussion."):Object(_.a)("Please %{registerLinkStart}register%{registerLinkEnd} or %{signInLinkStart}sign in%{signInLinkEnd} to reply.")}}},Yi=Object(o.a)(Wi,(function(){var e=this,i=e._self._c;return i("div",{staticClass:"disabled-comment gl-text-center gl-text-subtle"},[i("gl-sprintf",{attrs:{message:e.signedOutText},scopedSlots:e._u([{key:"registerLink",fn:function({content:n}){return[i("gl-link",{attrs:{href:e.registerPath}},[e._v(e._s(n))])]}},{key:"signInLink",fn:function({content:n}){return[i("gl-link",{attrs:{href:e.signInPath}},[e._v(e._s(n))])]}}])})],1)}),[],!1,null,null,null).exports,Ki=(n("dHQd"),n("yoDG"),n("KeS/"),n("tWNI"),n("8d6S"),n("VwWG"),n("IYHS"),n("rIA9"),n("MViX"),n("zglm"),n("GDOA"),n("hlbI"),n("a0mT"),n("u3H1"),n("ta8/"),n("IKCR"),n("nmTw"),n("W2kU"),n("58fc"),n("7dtT"),n("Rhav"),n("uhEP"),n("eppl"),n("IO2v")),Xi={name:"ToggleNotesWidget",components:{GlButton:$e.a,GlAvatar:Ii.a,GlAvatarLink:Pi.a,GlAvatarsInline:Ki.a},directives:{GlTooltip:pi.a},props:{collapsed:{type:Boolean,required:!0},replies:{type:Array,required:!0}},computed:{iconName(){return this.collapsed?"chevron-right":"chevron-down"},toggleText(){return this.collapsed?Object(_.f)("%d reply","%d replies",this.replies.length):Object(_.a)("Collapse replies")},toggleIconColor(){return this.collapsed?"!gl-text-default":"!gl-text-blue-600"},authors(){return[...new Set(this.replies.map((function(e){return e.author})))]},authorCollapsedTooltip(){return this.authors.length>2?Object(_.f)("%d reply","%d replies",this.authors.length):""},ariaState(){return String(!this.collapsed)}}},Zi=Object(o.a)(Xi,(function(){var e=this,i=e._self._c;return i("li",{staticClass:"toggle-comments gl-flex gl-min-h-8 gl-items-center gl-rounded-b-base gl-bg-subtle gl-p-3",attrs:{"aria-expanded":e.ariaState,"data-testid":"toggle-comments-wrapper"}},[i("gl-button",{staticClass:"gl-my-2 gl-mr-3 !gl-p-0",class:e.toggleIconColor,attrs:{category:"tertiary","data-testid":"toggle-replies-button",icon:e.iconName},on:{click:function(i){return e.$emit("toggle")}}}),e._v(" "),e.collapsed?[e.authors.length?i("gl-avatars-inline",{staticClass:"gl-mr-3 gl-whitespace-nowrap",attrs:{avatars:e.authors,collapsed:"","max-visible":2,"avatar-size":24,"badge-tooltip-prop":"name","badge-sr-only-text":e.authorCollapsedTooltip},scopedSlots:e._u([{key:"avatar",fn:function({avatar:e}){return[i("gl-avatar-link",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{href:e.webUrl,title:e.name}},[i("gl-avatar",{attrs:{alt:e.name,src:e.avatarUrl,size:24}})],1)]}}],null,!1,3624126802)}):e._e()]:e._e(),e._v(" "),i("gl-button",{staticClass:"toggle-comments-button",attrs:{variant:"link","data-testid":"replies-button"},on:{click:function(i){return e.$emit("toggle")}}},[i("span",[e._v(e._s(e.toggleText))])])],2)}),[],!1,null,null,null).exports,Ji={i18n:{deleteNote:{confirmationText:Object(_.a)("Are you sure you want to delete this comment?"),primaryModalBtnText:Object(_.a)("Delete comment"),errorText:P}},components:{DesignNote:Qi,DesignNotePin:Ye.a,DesignNoteSignedOut:Yi,DesignReplyForm:Ge,GlButton:$e.a,GlLink:vi.a,DiscussionReplyPlaceholder:bi.a,TimeAgoTooltip:yi.a,ToggleRepliesWidget:Zi,GlFormCheckbox:fi.a},directives:{GlTooltip:pi.a},mixins:[xi],props:{discussion:{type:Object,required:!0},noteableId:{type:String,required:!0},designId:{type:String,required:!0},markdownPreviewPath:{type:String,required:!1,default:""},registerPath:{type:String,required:!0},signInPath:{type:String,required:!0},resolvedDiscussionsExpanded:{type:Boolean,required:!0},discussionWithOpenForm:{type:String,required:!0}},apollo:{activeDiscussion:{query:p.a,result({data:e}){var i=this;this.discussion.resolved&&!this.resolvedDiscussionsExpanded||this.$nextTick((function(){i.$el&&i.shouldScrollToDiscussion(e.activeDiscussion)&&i.$el.scrollIntoView({behavior:"smooth",inline:"start"})}))}}},data(){return{isFormRendered:!1,activeDiscussion:{},noteToDelete:null,isResolving:!1,shouldChangeResolvedStatus:!1,areRepliesCollapsed:this.discussion.resolved,isLoggedIn:Object(Ae.A)()}},computed:{mutationVariables(){return{noteableId:this.noteableId,discussionId:this.discussion.id}},designVariables(){return{fullPath:this.projectPath,iid:this.issueIid,filenames:[this.$route.params.id],atVersion:this.designsVersion}},isDiscussionActive(){var e=this;return this.discussion.notes.some((function({id:i}){return i===e.activeDiscussion.id}))},resolveCheckboxText(){return this.discussion.resolved?Object(_.g)("DesignManagement|Unresolve thread"):Object(_.g)("DesignManagement|Resolve thread")},firstNote(){return this.discussion.notes[0]},discussionReplies(){return this.discussion.notes.slice(1)},areRepliesShown(){return!this.areRepliesCollapsed},resolveIconName(){return this.discussion.resolved?"check-circle-filled":"check-circle"},isRepliesWidgetVisible(){return this.discussionReplies.length>0},isReplyPlaceholderVisible(){return this.areRepliesShown||!this.discussionReplies.length},isFormVisible(){return this.isFormRendered&&this.discussionWithOpenForm===this.discussion.id}},mounted(){var e=this;this.$nextTick((function(){Object(ki.a)(e.$el.querySelectorAll(".gfm-project_member"))}))},updated(){var e=this;this.$nextTick((function(){Object(ki.a)(e.$el.querySelectorAll(".gfm-project_member"))}))},methods:{onDone({data:{createNote:e}}){me(e)?Object(N.createAlert)({message:B}):this.hideForm(),this.shouldChangeResolvedStatus&&this.toggleResolvedStatus()},hideForm(){this.isFormRendered=!1},showForm(){this.$emit("open-form",this.discussion.id),this.isFormRendered=!0},toggleResolvedStatus(){var e,i=this;this.isResolving=!0;const{defaultClient:n}=this.$apollo.provider.clients,t=n.readQuery({query:k.a,variables:this.designVariables}),a=(null===(e=M(t).currentUserTodos)||void 0===e||null===(e=e.nodes)||void 0===e?void 0:e.length)||0;this.$apollo.mutate({mutation:wi.a,variables:{id:this.discussion.id,resolve:!this.discussion.resolved}}).then((function({data:e}){var n,t;(null===(n=e.errors)||void 0===n?void 0:n.length)>0&&i.$emit("resolve-discussion-error",e.errors[0]);const s=(null==e||null===(t=e.discussionToggleResolve)||void 0===t||null===(t=t.discussion)||void 0===t||null===(t=t.noteable)||void 0===t||null===(t=t.currentUserTodos)||void 0===t||null===(t=t.nodes)||void 0===t?void 0:t.length)||0;Object(Fe.c)(s-a)})).catch((function(e){i.$emit("resolve-discussion-error",e)})).finally((function(){i.isResolving=!1}))},shouldScrollToDiscussion(e){const i=[x,C],{source:n}=e;return i.includes(n)&&this.isDiscussionActive},async showDeleteNoteConfirmationModal(e){var i;const n=1===(null==e||null===(i=e.discussion)||void 0===i||null===(i=i.notes)||void 0===i?void 0:i.nodes.length);this.noteToDelete={...e,isLast:n};await Object(Be.a)(this.$options.i18n.deleteNote.confirmationText,{primaryBtnVariant:"danger",primaryBtnText:this.$options.i18n.deleteNote.primaryModalBtnText})&&await this.deleteNote()},async deleteNote(){var e=this;const{id:i,discussion:n,isLast:t}=this.noteToDelete;try{await this.$apollo.mutate({mutation:Ei.a,variables:{input:{id:i}},update:function(a,{data:s}){const{errors:o}=s.destroyNote;null!=o&&o.length&&e.$emit("delete-note-error",o[0]);const r=t?{__typename:w.p,id:null==n?void 0:n.id}:{__typename:w.z,id:i};a.modify({id:a.identify(r),fields:function(e,{DELETE:i}){return i}})},optimisticResponse:{destroyNote:{note:null,errors:[],__typename:"DestroyNotePayload"}}})}catch(e){this.$emit("delete-note-error",this.$options.i18n.deleteNote.errorText),hi.b(e)}}},createNoteMutation:Si.a},en=Object(o.a)(Ji,(function(){var e=this,i=e._self._c;return i("div",{staticClass:"design-discussion-wrapper",on:{click:function(i){return e.$emit("update-active-discussion")}}},[i("design-note-pin",{attrs:{"is-resolved":e.discussion.resolved,label:e.discussion.index}}),e._v(" "),i("ul",{staticClass:"design-discussion gl-border gl-relative gl-list-none gl-rounded-base gl-border-section gl-p-0",class:{"gl-bg-blue-50":e.isDiscussionActive},attrs:{"data-testid":"design-discussion-content"}},[i("design-note",{attrs:{note:e.firstNote,"markdown-preview-path":e.markdownPreviewPath,"is-resolving":e.isResolving,"is-discussion":!0,"noteable-id":e.noteableId,"design-variables":e.designVariables},on:{"delete-note":function(i){return e.showDeleteNoteConfirmationModal(i)}},scopedSlots:e._u([e.isLoggedIn&&e.discussion.resolvable?{key:"resolve-discussion",fn:function(){return[i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{"aria-label":e.resolveCheckboxText,icon:e.resolveIconName,title:e.resolveCheckboxText,loading:e.isResolving,category:"tertiary","data-testid":"resolve-button"},on:{click:function(i){return i.stopPropagation(),e.toggleResolvedStatus.apply(null,arguments)}}})]},proxy:!0}:null,e.discussion.resolved?{key:"resolved-status",fn:function(){return[i("p",{staticClass:"gl-m-0 gl-mt-5 gl-text-sm gl-text-subtle",attrs:{"data-testid":"resolved-message"}},[e._v("\n          "+e._s(e.__("Resolved by"))+"\n          "),i("gl-link",{staticClass:"link-inherit-color gl-text-sm gl-text-subtle gl-no-underline",attrs:{href:e.discussion.resolvedBy.webUrl,target:"_blank"}},[e._v(e._s(e.discussion.resolvedBy.name))]),e._v(" "),i("time-ago-tooltip",{attrs:{time:e.discussion.resolvedAt,"tooltip-placement":"bottom"}})],1)]},proxy:!0}:null],null,!0)}),e._v(" "),e.isRepliesWidgetVisible?i("toggle-replies-widget",{attrs:{collapsed:e.areRepliesCollapsed,replies:e.discussionReplies},on:{toggle:function(i){e.areRepliesCollapsed=!e.areRepliesCollapsed}}}):e._e(),e._v(" "),e._l(e.discussionReplies,(function(n){return i("design-note",{directives:[{name:"show",rawName:"v-show",value:e.areRepliesShown,expression:"areRepliesShown"}],key:n.id,attrs:{note:n,"markdown-preview-path":e.markdownPreviewPath,"is-resolving":e.isResolving,"noteable-id":e.noteableId,"is-discussion":!1,"design-variables":e.designVariables},on:{"delete-note":function(i){return e.showDeleteNoteConfirmationModal(i)}}})})),e._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:e.isReplyPlaceholderVisible,expression:"isReplyPlaceholderVisible"}],staticClass:"reply-wrapper discussion-reply-holder",class:{"gl-bg-gray-10":!e.isLoggedIn}},[e.isLoggedIn?[e.isFormVisible?i("design-reply-form",{attrs:{"design-note-mutation":e.$options.createNoteMutation,"mutation-variables":e.mutationVariables,"markdown-preview-path":e.markdownPreviewPath,"noteable-id":e.noteableId,"discussion-id":e.discussion.id,"is-discussion":!1},on:{"note-submit-complete":e.onDone,"cancel-form":e.hideForm},scopedSlots:e._u([e.discussion.resolvable?{key:"resolve-checkbox",fn:function(){return[i("gl-form-checkbox",{staticClass:"-gl-mb-3 gl-mt-5",attrs:{"data-testid":"resolve-checkbox"},model:{value:e.shouldChangeResolvedStatus,callback:function(i){e.shouldChangeResolvedStatus=i},expression:"shouldChangeResolvedStatus"}},[e._v("\n              "+e._s(e.resolveCheckboxText)+"\n            ")])]},proxy:!0}:null],null,!0)}):i("discussion-reply-placeholder",{on:{focus:e.showForm}})]:[i("design-note-signed-out",{attrs:{"register-path":e.registerPath,"sign-in-path":e.signInPath}})]],2)],2)],1)}),[],!1,null,null,null).exports,nn=(n("ZzK0"),n("BzOf"),n("l5WF")),tn=n("EJYk"),an=n("NY9D"),sn=n("B3Hj"),on=n("9rT5"),rn=n.n(on);var dn={components:{MarkdownEditor:Le.a,GlAlert:_e.a,GlButton:$e.a,GlFormGroup:nn.a},directives:{SafeHtml:Ti.a,GlTooltip:pi.a},i18n:{editDescription:Object(_.g)("DesignManagement|Edit description"),descriptionLabel:Object(_.g)("DesignManagement|Description"),addDescriptionLabel:Object(_.g)("DesignManagement|Add a description")},formFieldProps:{id:"design-description",name:"design-description",placeholder:Object(_.g)("DesignManagement|Write a comment or drag your files here…"),"aria-label":Object(_.g)("DesignManagement|Design description")},markdownDocsPath:Object(Me.a)("user/markdown"),quickActionsDocsPath:Object(Me.a)("user/project/quick_actions"),props:{design:{type:Object,required:!0},markdownPreviewPath:{type:String,required:!0},designVariables:{type:Object,required:!0}},data(){return{descriptionText:this.design.description||"",showEditor:!1,isSubmitting:!1,errorMessage:"",autosaveKey:`Issue/${Object(qe.e)(this.design.issue.id)}/Design/${Object(qe.e)(this.design.id)}`}},computed:{canUpdate(){var e;return(null===(e=this.design.issue)||void 0===e||null===(e=e.userPermissions)||void 0===e?void 0:e.updateDesign)&&!this.showEditor},showAddDescriptionButton(){var e;return(null===(e=this.design.issue)||void 0===e||null===(e=e.userPermissions)||void 0===e?void 0:e.updateDesign)&&!this.design.descriptionHtml}},watch:{"design.descriptionHtml":{handler(e,i){e!==i&&this.renderGFM()},immediate:!0}},methods:{startEditing(){this.showEditor=!0},closeForm(){this.descriptionText||(this.descriptionText=this.design.description),this.showEditor=!1},async renderGFM(){if(await this.$nextTick(),Object(tn.a)(this.$refs["gfm-content"]),this.canUpdate){this.$el.querySelectorAll(".task-list-item-checkbox").forEach((function(e){e.disabled=!1}))}},setDescriptionText(e){this.isSubmitting||(this.descriptionText=e)},async updateDesignDescription(){this.isSubmitting=!0,this.$refs.markdownEditor&&Object(sn.c)(this.$refs.markdownEditor.isContentEditorActive,"Design");try{const e={description:this.descriptionText,id:this.design.id};await this.$apollo.mutate({mutation:rn.a,variables:{input:e}}),this.closeForm()}catch{this.errorMessage=le}finally{this.isSubmitting=!1}},toggleCheckboxes(e){const{target:i}=e;if(function(e){return null==e?void 0:e.classList.contains("task-list-item-checkbox")}(i)){i.disabled=!0;const{sourcepos:e}=i.parentElement.dataset;if(!e)return;this.descriptionText=Object(an.a)({rawMarkdown:this.descriptionText,checkboxChecked:i.checked,sourcepos:e}),this.updateDesignDescription()}}}},ln=Object(o.a)(dn,(function(){var e=this,i=e._self._c;return i("div",{staticClass:"design-description-container"},[e.showEditor?i("gl-form-group",{staticClass:"design-description-form common-note-form",attrs:{label:e.$options.i18n.descriptionLabel,"label-class":"!gl-leading-20 !gl-text-lg"}},[e.errorMessage?i("div",{staticClass:"gl-pb-3"},[i("gl-alert",{attrs:{variant:"danger"},on:{dismiss:function(i){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n      ")])],1):e._e(),e._v(" "),i("markdown-editor",{ref:"markdownEditor",attrs:{value:e.descriptionText,"render-markdown-path":e.markdownPreviewPath,"markdown-docs-path":e.$options.markdownDocsPath,"form-field-props":e.$options.formFieldProps,"quick-actions-docs-path":e.$options.quickActionsDocsPath,"autosave-key":e.autosaveKey,"enable-autocomplete":"","supports-quick-actions":!1,autofocus:""},on:{input:e.setDescriptionText,keydown:[function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:i.metaKey?e.updateDesignDescription.apply(null,arguments):null},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:i.ctrlKey?e.updateDesignDescription.apply(null,arguments):null},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])||i.ctrlKey||i.shiftKey||i.altKey||i.metaKey?null:(i.stopPropagation(),e.closeForm.apply(null,arguments))}]}}),e._v(" "),i("div",{staticClass:"gl-mt-3 gl-flex gl-gap-3"},[i("gl-button",{attrs:{category:"primary",variant:"confirm",loading:e.isSubmitting,"data-testid":"save-description"},on:{click:e.updateDesignDescription}},[e._v(e._s(e.s__("DesignManagement|Save changes"))+"\n      ")]),e._v(" "),i("gl-button",{attrs:{category:"tertiary","data-testid":"cancel"},on:{click:e.closeForm}},[e._v(e._s(e.s__("DesignManagement|Cancel"))+"\n      ")])],1)],1):i("div",{staticClass:"design-description-view"},[e.showAddDescriptionButton?i("gl-button",{staticClass:"gl-mb-5 gl-ml-auto",attrs:{size:"small","data-testid":"add-design-description","aria-label":e.$options.i18n.addDescriptionLabel},on:{click:e.startEditing}},[e._v("\n      "+e._s(e.$options.i18n.addDescriptionLabel)+"\n    ")]):[i("div",{staticClass:"design-description-header gl-mb-2 gl-flex gl-justify-between"},[i("h3",{staticClass:"gl-m-0 gl-text-lg !gl-leading-20"},[e._v("\n          "+e._s(e.$options.i18n.descriptionLabel)+"\n        ")]),e._v(" "),e.canUpdate?i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"gl-ml-auto",attrs:{size:"small",category:"tertiary","aria-label":e.$options.i18n.editDescription,title:e.$options.i18n.editDescription,"data-testid":"edit-description",icon:"pencil"},on:{click:e.startEditing}}):e._e()],1),e._v(" "),e.design.descriptionHtml?i("div",{staticClass:"design-description js-task-list-container"},[i("div",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.design.descriptionHtml,expression:"design.descriptionHtml"}],ref:"gfm-content",staticClass:"md gl-mb-4",attrs:{"data-testid":"design-description-content"},on:{change:e.toggleCheckboxes}})]):e._e()]],2)],1)}),[],!1,null,null,null).exports,un={components:{DesignDiscussion:en,DesignNoteSignedOut:Yi,GlAccordion:di.a,GlAccordionItem:li.a,GlSkeletonLoader:ui.a,GlEmptyState:ci.a,DescriptionForm:ln,DesignDisclosure:gi.a},mixins:[Object(Ce.a)()],inject:{projectPath:{default:""},issueIid:{default:""},registerPath:{default:""},signInPath:{default:""}},props:{design:{type:Object,required:!0},resolvedDiscussionsExpanded:{type:Boolean,required:!0},markdownPreviewPath:{type:String,required:!0},isLoading:{type:Boolean,required:!0},designVariables:{type:Object,required:!0},isOpen:{type:Boolean,required:!0}},data:()=>({discussionWithOpenForm:"",isLoggedIn:Object(Ae.A)(),emptyDiscussionSvgPath:mi.a}),computed:{discussions(){return T(this.design.discussions)},issue(){var e;return{...this.design.issue,webPath:null===(e=this.design.issue)||void 0===e?void 0:e.webPath.substr(1)}},discussionParticipants(){var e;return((null===(e=this.issue.participants)||void 0===e?void 0:e.nodes)||[]).map((function(e){return i=e,{...i,web_url:i.webUrl,avatar_url:i.avatarUrl};var i}))},resolvedDiscussions(){return this.discussions.filter((function(e){return e.resolved}))},hasResolvedDiscussions(){return this.resolvedDiscussions.length>0},resolvedDiscussionsTitle(){return`${this.$options.i18n.resolveCommentsToggleText} (${this.resolvedDiscussions.length})`},unresolvedDiscussions(){return this.discussions.filter((function(e){return!e.resolved}))},unresolvedDiscussionsCount(){return Object(_.f)("%d Thread","%d Threads",this.unresolvedDiscussions.length)},isResolvedDiscussionsExpanded:{get(){return this.resolvedDiscussionsExpanded},set(e){this.$emit("toggleResolvedComments",e)}},showDescriptionForm(){var e;return!this.isLoading&&((null===(e=this.design.issue)||void 0===e||null===(e=e.userPermissions)||void 0===e?void 0:e.updateDesign)||Boolean(this.design.descriptionHtml))}},mounted(){!this.isResolvedCommentsPopoverHidden&&this.$refs.resolvedComments&&this.$refs.resolvedComments.$el.scrollIntoView()},methods:{handleSidebarClick(){this.updateActiveDiscussion()},updateActiveDiscussion(e){this.$apollo.mutate({mutation:Xe.a,variables:{id:e,source:F}})},closeCommentForm(){this.comment="",this.$emit("closeCommentForm")},updateDiscussionWithOpenForm(e){this.discussionWithOpenForm=e}},i18n:{resolveCommentsToggleText:Object(_.g)("DesignManagement|Resolved Comments")}},cn=Object(o.a)(un,(function(){var e=this,i=e._self._c;return i("design-disclosure",{attrs:{open:e.isOpen},scopedSlots:e._u([{key:"default",fn:function(){return[i("div",{staticClass:"image-notes gl-h-full gl-pt-0",on:{click:function(i){return i.target!==i.currentTarget?null:e.handleSidebarClick.apply(null,arguments)}}},[e.showDescriptionForm?i("description-form",{staticClass:"gl-border-b gl-my-5",attrs:{design:e.design,"design-variables":e.designVariables,"markdown-preview-path":e.markdownPreviewPath}}):e._e(),e._v(" "),e.isLoading?i("div",{staticClass:"gl-my-5"},[i("gl-skeleton-loader")],1):[i("h3",{staticClass:"gl-my-5 gl-text-lg !gl-leading-20",attrs:{"data-testid":"unresolved-discussion-count"}},[e._v("\n          "+e._s(e.unresolvedDiscussionsCount)+"\n        ")]),e._v(" "),e.isLoggedIn&&0===e.unresolvedDiscussions.length?i("gl-empty-state",{attrs:{"data-testid":"new-discussion-disclaimer","svg-path":e.emptyDiscussionSvgPath},scopedSlots:e._u([{key:"description",fn:function(){return[e._v("\n            "+e._s(e.s__("DesignManagement|Click on the image where you'd like to add a new comment."))+"\n          ")]},proxy:!0}],null,!1,2034928084)}):e._e(),e._v(" "),e.isLoggedIn?e._e():i("design-note-signed-out",{staticClass:"gl-mb-4",attrs:{"register-path":e.registerPath,"sign-in-path":e.signInPath,"is-add-discussion":!0}}),e._v(" "),e._l(e.unresolvedDiscussions,(function(n){return i("design-discussion",{key:n.id,attrs:{discussion:n,"design-id":e.$route.params.id,"noteable-id":e.design.id,"markdown-preview-path":e.markdownPreviewPath,"register-path":e.registerPath,"sign-in-path":e.signInPath,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"discussion-with-open-form":e.discussionWithOpenForm,"data-testid":"unresolved-discussion"},on:{"create-note-error":function(i){return e.$emit("onDesignDiscussionError",i)},"update-note-error":function(i){return e.$emit("updateNoteError",i)},"delete-note-error":function(i){return e.$emit("deleteNoteError",i)},"resolve-discussion-error":function(i){return e.$emit("resolveDiscussionError",i)},"update-active-discussion":function(i){return e.updateActiveDiscussion(n.notes[0].id)},"open-form":e.updateDiscussionWithOpenForm}})})),e._v(" "),e.hasResolvedDiscussions?i("gl-accordion",{staticClass:"gl-mb-5",attrs:{"header-level":3}},[i("gl-accordion-item",{attrs:{title:e.resolvedDiscussionsTitle,"header-class":"!gl-mb-5"},model:{value:e.isResolvedDiscussionsExpanded,callback:function(i){e.isResolvedDiscussionsExpanded=i},expression:"isResolvedDiscussionsExpanded"}},e._l(e.resolvedDiscussions,(function(n){return i("design-discussion",{key:n.id,attrs:{discussion:n,"design-id":e.$route.params.id,"noteable-id":e.design.id,"markdown-preview-path":e.markdownPreviewPath,"register-path":e.registerPath,"sign-in-path":e.signInPath,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"discussion-with-open-form":e.discussionWithOpenForm,"data-testid":"resolved-discussion"},on:{error:function(i){return e.$emit("onDesignDiscussionError",i)},"update-note-error":function(i){return e.$emit("updateNoteError",i)},"delete-note-error":function(i){return e.$emit("deleteNoteError",i)},"open-form":e.updateDiscussionWithOpenForm,"update-active-discussion":function(i){return e.updateActiveDiscussion(n.notes[0].id)}}})})),1)],1):e._e(),e._v(" "),e._t("reply-form")]],2)]},proxy:!0}])})}),[],!1,null,null,null).exports,mn=n("nt8V"),gn=n.n(mn),vn=n("5QKO");var fn=n("1cpz"),pn=n("Mq5L"),hn={name:"DeleteButton",components:{GlButton:$e.a,GlModal:fn.a},directives:{GlModalDirective:pn.a},props:{isDeleting:{type:Boolean,required:!1,default:!1},buttonClass:{type:String,required:!1,default:""},buttonVariant:{type:String,required:!1,default:"default"},buttonCategory:{type:String,required:!1,default:"primary"},buttonIcon:{type:String,required:!1,default:void 0},buttonSize:{type:String,required:!1,default:"medium"},hasSelectedDesigns:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1}},data:()=>({modalId:l()("design-deletion-confirmation-")}),modal:{title:Object(_.g)("DesignManagement|Are you sure you want to archive the selected designs?"),actionPrimary:{text:Object(_.g)("DesignManagement|Archive designs"),attributes:{variant:"confirm","data-testid":"confirm-archiving-button"}},actionCancel:{text:Object(_.a)("Cancel")}}},kn=Object(o.a)(hn,(function(){var e=this,i=e._self._c;return i("div",[i("gl-modal",{attrs:{"modal-id":e.modalId,title:e.$options.modal.title,"action-primary":e.$options.modal.actionPrimary,"action-cancel":e.$options.modal.actionCancel},on:{ok:function(i){return e.$emit("delete-selected-designs")}}},[e._v("\n    "+e._s(e.s__("DesignManagement|Archived designs will still be available in previous versions of the design collection."))+"\n  ")]),e._v(" "),i("gl-button",{directives:[{name:"gl-modal-directive",rawName:"v-gl-modal-directive",value:e.modalId,expression:"modalId"}],class:e.buttonClass,attrs:{variant:e.buttonVariant,category:e.buttonCategory,size:e.buttonSize,loading:e.loading,icon:e.buttonIcon,disabled:e.isDeleting||!e.hasSelectedDesigns}},[e._t("default")],2)],1)}),[],!1,null,null,null).exports,bn=n("EFA5"),yn=n.n(bn),Dn=n("hvPU"),Sn=n("JDjj"),Nn=n.n(Sn),wn={components:{TodoButton:Dn.a,GlIcon:ei.a},directives:{GlTooltip:pi.a},mixins:[xi],inject:{projectPath:{default:""},issueIid:{default:""}},props:{design:{type:Object,required:!0}},data:()=>({todoLoading:!1}),computed:{designVariables(){return{fullPath:this.projectPath,iid:this.issueIid,filenames:[this.$route.params.id],atVersion:this.designsVersion}},designTodoVariables(){return{projectPath:this.projectPath,issueId:(e=this.design.issue.id,(e.match("Issue/(.+$)")||[])[1]),designId:V(this.design.id),issueIid:this.issueIid,filenames:[this.$route.params.id],atVersion:this.designsVersion};var e},pendingTodo(){var e;return null===(e=this.design.currentUserTodos)||void 0===e?void 0:e.nodes[0]},hasPendingTodo(){return Boolean(this.pendingTodo)},buttonIcon(){return this.pendingTodo?"todo-done":"todo-add"},tooltipLabel(){return Object(Fe.b)(this.hasPendingTodo)}},methods:{createTodo(){var e=this;return this.todoLoading=!0,this.$apollo.mutate({mutation:Nn.a,variables:this.designTodoVariables,update:function(i,{data:{createDesignTodo:n}}){const t=(n.errors||[])[0];t&&e.$emit("error",Error(t.message))}}).catch((function(i){throw e.$emit("error",Error(ie)),i})).finally((function(){e.todoLoading=!1}))},deleteTodo(){var e=this;if(!this.hasPendingTodo)return Promise.reject();const{id:i}=this.pendingTodo,{designVariables:n}=this;return this.todoLoading=!0,this.$apollo.mutate({mutation:yn.a,variables:{id:i},update(e,{data:{todoMarkDone:i}}){const t=(i.errors||[])[0];t?this.$emit("error",Error(t)):ke(e,i,k.a,n)}}).catch((function(i){throw e.$emit("error",Error(te)),i})).finally((function(){e.todoLoading=!1}))},toggleTodo(){return this.hasPendingTodo?this.deleteTodo():this.createTodo()}}},_n=Object(o.a)(wn,(function(){var e=this,i=e._self._c;return i("todo-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],attrs:{category:"tertiary",title:e.tooltipLabel,"issuable-type":"design","issuable-id":e.design.iid,"is-todo":e.hasPendingTodo,loading:e.todoLoading,"is-icon-button":!0},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.toggleTodo.apply(null,arguments)}}},[i("gl-icon",{class:{"!gl-fill-blue-500":e.pendingTodo},attrs:{name:e.buttonIcon}})],1)}),[],!1,null,null,null).exports,En=n("cfjj"),xn=n.n(En),Fn={mixins:[xi],apollo:{designCollection:{query:Pe.a,variables(){return{fullPath:this.projectPath,iid:this.issueIid,atVersion:this.designsVersion}},update:function(e){return{designs:xn()(e)(["project","issue","designCollection","designs","nodes"]),copyState:xn()(e)(["project","issue","designCollection","copyState"])}},error(){this.error=!0},result(){var e;this.$route.query.version&&!this.hasValidVersion&&(Object(N.createAlert)({message:Object(_.g)("DesignManagement|Requested design version does not exist. Showing latest version instead")}),this.$router.replace({name:"designs",query:{version:void 0}})),"ERROR"===(null===(e=this.designCollection)||void 0===e?void 0:e.copyState)&&Object(N.createAlert)({message:Object(_.g)("DesignManagement|There was an error moving your designs. Please upload your designs below."),variant:N.VARIANT_WARNING})}}},data:()=>({designCollection:null,error:!1}),computed:{designs(){var e;return(null===(e=this.designCollection)||void 0===e?void 0:e.designs)||[]}}},Cn={i18n:{nextButton:Object(_.g)("DesignManagement|Go to next design"),previousButton:Object(_.g)("DesignManagement|Go to previous design")},components:{GlButton:$e.a,GlButtonGroup:si.a},directives:{GlTooltip:pi.a},mixins:[Fn],props:{id:{type:String,required:!0}},computed:{designsCount(){return this.designs.length},currentIndex(){var e=this;return this.designs.findIndex((function(i){return i.filename===e.id}))},paginationText(){return Object(_.h)(Object(_.g)("DesignManagement|%{current_design} of %{designs_count}"),{current_design:this.currentIndex+1,designs_count:this.designsCount})},previousDesign(){return 0===this.currentIndex?null:this.designs[this.currentIndex-1]},nextDesign(){return this.currentIndex+1===this.designsCount?null:this.designs[this.currentIndex+1]}},mounted(){var e=this;Ee.b.bind(Object(xe.Ab)(xe.O),(function(){return e.navigateToDesign(e.previousDesign)})),Ee.b.bind(Object(xe.Ab)(xe.N),(function(){return e.navigateToDesign(e.nextDesign)}))},beforeDestroy(){Ee.b.unbind(Object(xe.Ab)(xe.O)),Ee.b.unbind(Object(xe.Ab)(xe.N))},methods:{navigateToDesign(e){e&&this.$router.push({name:"design",params:{id:e.filename},query:this.$route.query})}}},In=Object(o.a)(Cn,(function(){var e=this,i=e._self._c;return e.designsCount?i("div",{staticClass:"gl-flex gl-shrink-0 gl-items-center"},[e._v("\n  "+e._s(e.paginationText)+"\n  "),i("gl-button-group",{staticClass:"gl-ml-3"},[i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"js-previous-design",attrs:{disabled:!e.previousDesign,title:e.$options.i18n.previousButton,"aria-label":e.$options.i18n.previousButton,icon:"chevron-lg-left"},on:{click:function(i){return e.navigateToDesign(e.previousDesign)}}}),e._v(" "),i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"js-next-design",attrs:{disabled:!e.nextDesign,title:e.$options.i18n.nextButton,"aria-label":e.$options.i18n.nextButton,icon:"chevron-lg-right"},on:{click:function(i){return e.navigateToDesign(e.nextDesign)}}})],1)],1):e._e()}),[],!1,null,null,null).exports,Pn={components:{GlIcon:ei.a},DESIGNS_ROUTE_NAME:"designs"},On=Object(o.a)(Pn,(function(){var e=this._self._c;return e("div",{staticClass:"gl-border-l"},[e("router-link",{staticClass:"btn btn-icon gl-mx-3 gl-border-0 gl-px-3",attrs:{to:{name:this.$options.DESIGNS_ROUTE_NAME,query:this.$route.query},"aria-label":this.s__("DesignManagement|Go back to designs"),"data-testid":"close-design",tag:"button"}},[e("gl-icon",{attrs:{name:"close"}})],1)],1)}),[],!1,null,null,null).exports,Tn={i18n:{downloadButtonLabel:Object(_.g)("DesignManagement|Download design"),hideCommentsButtonLabel:Object(_.g)("DesignManagement|Hide comments"),showCommentsButtonLabel:Object(_.g)("DesignManagement|Show comments")},components:{GlButton:$e.a,GlIcon:ei.a,GlSkeletonLoader:ui.a,DesignNavigation:In,DeleteButton:kn,DesignTodoButton:_n,CloseButton:On,ImportedBadge:Vi.a},directives:{GlTooltip:pi.a},mixins:[vn.a],inject:{projectPath:{default:""},issueIid:{default:""}},props:{id:{type:String,required:!0},isDeleting:{type:Boolean,required:!0},filename:{type:String,required:!1,default:""},updatedAt:{type:String,required:!1,default:null},updatedBy:{type:Object,required:!1,default:function(){return{}}},isLatestVersion:{type:Boolean,required:!0},image:{type:String,required:!1,default:""},isLoading:{type:Boolean,required:!0},design:{type:Object,required:!0},isSidebarOpen:{type:Boolean,required:!0}},data:()=>({isLoggedIn:Object(Ae.A)(),permissions:{createDesign:!1}}),apollo:{permissions:{query:gn.a,variables(){return{fullPath:this.projectPath,iid:this.issueIid}},update:function(e){return e.project.issue.userPermissions}}},computed:{updatedText(){return Object(_.h)(Object(_.a)("Updated %{updated_at} by %{updated_by}"),{updated_at:this.timeFormatted(this.updatedAt),updated_by:this.updatedBy.name})},canDeleteDesign(){return this.permissions.createDesign},issueTitle(){return this.design.issue.title},isImported(){return this.design.imported},toggleCommentsButtonLabel(){return this.isSidebarOpen?this.$options.i18n.hideCommentsButtonLabel:this.$options.i18n.showCommentsButtonLabel}},DESIGNS_ROUTE_NAME:"designs",TYPE_DESIGN:Ai.e},jn=Object(o.a)(Tn,(function(){var e=this,i=e._self._c;return i("header",{staticClass:"js-design-header gl-border-b gl-flex gl-max-w-full gl-flex-col gl-justify-between gl-bg-white gl-py-4 gl-pl-5 md:gl-flex-row md:gl-items-center"},[i("div",{staticClass:"gl-mb-3 gl-flex gl-flex-row gl-items-center gl-overflow-hidden md:gl-mb-0"},[i("div",{staticClass:"gl-mr-3 gl-flex gl-overflow-hidden"},[e.isLoading?i("gl-skeleton-loader",{attrs:{lines:1}}):i("h2",{staticClass:"gl-m-0 gl-flex gl-items-center gl-overflow-hidden gl-text-base"},[i("span",{staticClass:"gl-truncate gl-text-heading gl-no-underline"},[e._v("\n          "+e._s(e.issueTitle)+"\n        ")]),e._v(" "),i("gl-icon",{staticClass:"gl-shrink-0",attrs:{name:"chevron-right",variant:"disabled"}}),e._v(" "),i("span",{staticClass:"gl-truncate gl-font-normal"},[e._v(e._s(e.filename))]),e._v(" "),e.isImported?i("imported-badge",{staticClass:"gl-ml-2",attrs:{"importable-type":e.$options.TYPE_DESIGN}}):e._e()],1),e._v(" "),e.updatedAt?i("small",{staticClass:"gl-text-subtle"},[e._v(e._s(e.updatedText))]):e._e()],1),e._v(" "),i("close-button",{staticClass:"gl-ml-auto md:gl-hidden"})],1),e._v(" "),i("div",{staticClass:"gl-mr-5 gl-flex gl-shrink-0 md:gl-ml-auto md:gl-flex-row"},[e.isLoggedIn?i("design-todo-button",{staticClass:"gl-ml-0 md:gl-ml-3",attrs:{design:e.design},on:{error:function(i){return e.$emit("todoError",i)}}}):e._e(),e._v(" "),i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"gl-ml-2",attrs:{category:"tertiary",href:e.image,icon:"download",title:e.$options.i18n.downloadButtonLabel,"aria-label":e.$options.i18n.downloadButtonLabel}}),e._v(" "),e.isLatestVersion&&e.canDeleteDesign?i("delete-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"gl-ml-2",attrs:{"is-deleting":e.isDeleting,"button-variant":"default","button-icon":"archive","button-category":"tertiary",title:e.s__("DesignManagement|Archive design")},on:{"delete-selected-designs":function(i){return e.$emit("delete")}}}):e._e(),e._v(" "),i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"gl-ml-2 gl-mr-6",attrs:{category:"tertiary",icon:"comments",title:e.toggleCommentsButtonLabel,"aria-label":e.toggleCommentsButtonLabel,"data-testid":"toggle-design-sidebar"},on:{click:function(i){return e.$emit("toggle-sidebar")}}}),e._v(" "),i("design-navigation",{staticClass:"gl-ml-auto",attrs:{id:e.id}})],1),e._v(" "),i("close-button",{staticClass:"gl-hidden md:gl-flex"})],1)}),[],!1,null,null,null).exports,Vn=n("d6Vs"),$n=n.n(Vn),Mn=n("Wthf"),An=n.n(Mn),qn=n("qPgm"),Ln=n("ygVz");const Un="iglu:com.gitlab/design_management_context/jsonschema/1-0-0",Rn="view_design",Bn="create_design",zn="update_design",Gn="design_action";var Qn={components:{DesignReplyForm:Ge,DesignPresentation:ai,DesignScaler:ri,DesignDestroyer:Ve,Toolbar:jn,GlAlert:_e.a,DesignSidebar:cn},mixins:[xi,Object(Ce.a)()],beforeRouteUpdate(e,i,n){this.scale=1,n()},beforeRouteEnter(e,i,n){const t=U();t&&t.classList.add(...I),n()},beforeRouteLeave(e,i,n){const t=U();t&&t.classList.remove(...I),n()},props:{id:{type:String,required:!0}},data:()=>({design:{},annotationCoordinates:null,errorMessage:"",scale:1,resolvedDiscussionsExpanded:!1,prevCurrentUserTodos:null,maxScale:2,isSidebarOpen:!0}),apollo:{design:{query:k.a,fetchPolicy:g.c.CACHE_AND_NETWORK,variables(){return this.designVariables},update:function(e){return M(e)},result(e){this.onDesignQueryResult(e)},error(){this.onQueryError(K)}}},computed:{isLoading(){return this.$apollo.queries.design.loading},discussions(){return this.design.discussions?T(this.design.discussions):[]},markdownPreviewPath(){return`/${this.projectPath}/-/preview_markdown?target_type=Issue`},designVariables(){return{fullPath:this.projectPath,iid:this.issueIid,filenames:[this.$route.params.id],atVersion:this.designsVersion}},mutationVariables(){const{x:e,y:i,width:n,height:t}=this.annotationCoordinates;return{noteableId:this.design.id,position:{headSha:this.design.diffRefs.headSha,baseSha:this.design.diffRefs.baseSha,startSha:this.design.diffRefs.startSha,x:e,y:i,width:n,height:t,paths:{newPath:this.design.fullPath}}}},isAnnotating(){return Boolean(this.annotationCoordinates)},resolvedDiscussions(){return this.discussions.filter((function(e){return e.resolved}))},currentUserTodos(){var e;return this.design&&this.design.currentUserTodos?null===(e=this.design.currentUserTodos)||void 0===e||null===(e=e.nodes)||void 0===e?void 0:e.length:null}},watch:{resolvedDiscussions(e){e.length||(this.resolvedDiscussionsExpanded=!1)},currentUserTodos(e,i){this.prevCurrentUserTodos=i}},mounted(){Ee.b.bind(Object(xe.Ab)(xe.K),this.closeDesign),this.trackPageViewEvent(),this.updateActiveDiscussionFromUrl()},beforeDestroy(){Ee.b.unbind(Object(xe.Ab)(xe.K))},methods:{addImageDiffNoteToStore({data:e}){const{createImageDiffNote:i}=e,{cache:n}=this.$apollo.getClient();ve(n,i,k.a,this.designVariables),this.closeCommentForm(e)},updateImageDiffNoteInStore(e,{data:{repositionImageDiffNote:i}}){return fe(e,i,k.a,this.designVariables)},onMoveNote({noteId:e,discussionId:i,position:n}){var t=this;const a=this.discussions.find((function({id:e}){return e===i})).notes.find((function({discussion:e}){return e.id===i})),s={optimisticResponse:L(a,{position:n}),variables:{input:{id:e,position:n}},mutation:An.a,update:this.updateImageDiffNoteInStore};return this.$apollo.mutate(s).catch((function(e){return t.onUpdateImageDiffNoteError(e)}))},onDesignQueryResult({data:e,loading:i}){i||(e&&M(e)?this.$route.query.version&&!this.hasValidVersion&&this.onQueryError(X):this.onQueryError(K))},onQueryError(e){Object(N.createAlert)({message:e}),this.$router.push({name:this.$options.DESIGNS_ROUTE_NAME})},onError(e,i){if(this.errorMessage=e,i)throw i},onDeleteNoteError(e){this.onError(H,e)},onUpdateImageDiffNoteError(e){this.onError(G,e)},onDesignDeleteError(e){this.onError(oe(),e)},onResolveDiscussionError(e){this.onError(G,e)},onTodoError(e){this.onError((null==e?void 0:e.message)||ae,e)},openCommentForm(e){this.annotationCoordinates=e},closeCommentForm(e){this.annotationCoordinates=null,null!=e&&e.data&&!we()(this.prevCurrentUserTodos)&&(Object(Fe.c)(this.currentUserTodos-this.prevCurrentUserTodos),this.prevCurrentUserTodos=this.currentUserTodos)},closeDesign(){this.$router.push({name:this.$options.DESIGNS_ROUTE_NAME,query:this.$route.query})},trackPageViewEvent(){!function(e="",i="",n=1,t=!1){const a=Rn;Ln.b.event("projects:issues:design",a,{label:a,context:{schema:Un,data:{"design-version-number":n,"design-is-current-version":t,"internal-object-referrer":e,"design-collection-owner":i}}})}("issue-design-collection","issue",this.$route.query.version||this.latestVersionId,this.isLatestVersion),qn.b.trackRedisHllUserEvent(Gn)},updateActiveDiscussion(e,i=F){this.$apollo.mutate({mutation:Xe.a,variables:{id:e,source:i}})},updateActiveDiscussionFromUrl(){const e=A(this.$route.hash),i=e?function(e){return"gid://gitlab/DiffNote/"+e}(e):void 0;return this.updateActiveDiscussion(i,C)},toggleResolvedComments(e){this.resolvedDiscussionsExpanded=e},setMaxScale(e){this.maxScale=1/e},toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}},createImageDiffNoteMutation:$n.a,DESIGNS_ROUTE_NAME:"designs"},Hn=Object(o.a)(Qn,(function(){var e=this,i=e._self._c;return i("div",{staticClass:"design-detail js-design-detail fixed-top gl-flex gl-w-full gl-flex-col gl-justify-center gl-bg-gray-10 lg:gl-flex-row"},[i("div",{staticClass:"gl-relative gl-flex gl-grow gl-flex-col gl-overflow-hidden"},[i("design-destroyer",{attrs:{filenames:[e.design.filename],"project-path":e.projectPath,iid:e.issueIid},on:{done:function(i){return e.$router.push({name:e.$options.DESIGNS_ROUTE_NAME})},error:e.onDesignDeleteError},scopedSlots:e._u([{key:"default",fn:function({mutate:n,loading:t}){return[i("toolbar",e._b({attrs:{id:e.id,"is-deleting":t,"is-latest-version":e.isLatestVersion,"is-loading":e.isLoading,design:e.design,"is-sidebar-open":e.isSidebarOpen},on:{delete:n,"toggle-sidebar":e.toggleSidebar}},"toolbar",e.design,!1))]}}])}),e._v(" "),i("div",{staticClass:"gl-relative gl-flex gl-grow gl-flex-col gl-overflow-hidden lg:gl-flex-row"},[i("div",{staticClass:"gl-relative gl-flex gl-grow-2 gl-flex-col gl-overflow-hidden"},[e.errorMessage?i("div",{staticClass:"gl-p-5"},[i("gl-alert",{attrs:{variant:"danger"},on:{dismiss:function(i){e.errorMessage=null}}},[e._v("\n            "+e._s(e.errorMessage)+"\n          ")])],1):e._e(),e._v(" "),i("design-presentation",{attrs:{image:e.design.image,"image-name":e.design.filename,discussions:e.discussions,"is-annotating":e.isAnnotating,scale:e.scale,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"is-loading":e.isLoading,"disable-commenting":!e.isSidebarOpen},on:{openCommentForm:e.openCommentForm,closeCommentForm:e.closeCommentForm,moveNote:e.onMoveNote,setMaxScale:e.setMaxScale}}),e._v(" "),i("div",{staticClass:"design-scaler-wrapper gl-absolute gl-mb-6 gl-flex gl-items-center gl-justify-center"},[i("design-scaler",{attrs:{"max-scale":e.maxScale},on:{scale:function(i){e.scale=i}}})],1)],1),e._v(" "),i("design-sidebar",{attrs:{design:e.design,"design-variables":e.designVariables,"resolved-discussions-expanded":e.resolvedDiscussionsExpanded,"markdown-preview-path":e.markdownPreviewPath,"is-loading":e.isLoading,"is-open":e.isSidebarOpen},on:{deleteNoteError:e.onDeleteNoteError,resolveDiscussionError:e.onResolveDiscussionError,toggleResolvedComments:e.toggleResolvedComments,todoError:e.onTodoError},scopedSlots:e._u([{key:"reply-form",fn:function(){return[e.isAnnotating?i("design-reply-form",{ref:"newDiscussionForm",attrs:{"design-note-mutation":e.$options.createImageDiffNoteMutation,"mutation-variables":e.mutationVariables,"markdown-preview-path":e.markdownPreviewPath,"noteable-id":e.design.id,"is-discussion":!0},on:{"note-submit-complete":e.addImageDiffNoteToStore,"cancel-form":e.closeCommentForm}}):e._e()]},proxy:!0}])})],1)],1)])}),[],!1,null,null,null).exports,Wn=n("eVUo"),Yn=n("wAfB"),Kn=n.n(Yn),Xn=n("O4Ih"),Zn=n("OR9K"),Jn=n("g63F"),et=n("BXQK"),it=n("ehHk"),nt={components:{GlCard:et.a,GlLoadingIcon:We.a,GlIntersectionObserver:it.a,GlIcon:ei.a,Timeago:yi.a},directives:{GlTooltip:pi.a},props:{id:{type:[Number,String],required:!0},event:{type:String,required:!0},notesCount:{type:Number,required:!0},image:{type:String,required:!0},filename:{type:String,required:!0},updatedAt:{type:String,required:!1,default:null},isUploading:{type:Boolean,required:!1,default:!0},imageV432x230:{type:String,required:!1,default:null}},data:()=>({imageLoading:!0,imageError:!1,wasInView:!1}),computed:{icon(){const e=this.event.toLowerCase(),i={creation:{name:"file-addition-solid",classes:"gl-fill-icon-success",tooltip:Object(_.a)("Added in this version")},modification:{name:"file-modified-solid",classes:"gl-fill-icon-info",tooltip:Object(_.a)("Modified in this version")},deletion:{name:"file-deletion-solid",classes:"gl-fill-icon-danger",tooltip:Object(_.a)("Archived in this version")}};return i[e]?i[e]:{}},notesLabel(){return Object(_.f)("%d comment","%d comments",this.notesCount)},imageLink(){return this.wasInView?this.imageV432x230||this.image:""},showLoadingSpinner(){return this.imageLoading||this.isUploading},showImageErrorIcon(){return this.wasInView&&this.imageError},showImage(){return!this.showLoadingSpinner&&!this.showImageErrorIcon}},methods:{onImageLoad(){this.imageLoading=!1,this.imageError=!1},onImageError(){this.imageLoading=!1,this.imageError=!0},onAppear(){this.wasInView||(this.wasInView=!0,this.imageLoading=!0)}},DESIGN_ROUTE_NAME:"design"},tt=Object(o.a)(nt,(function(){var e=this,i=e._self._c;return i("router-link",{staticClass:"gl-text-default hover:gl-text-default",attrs:{to:{name:e.$options.DESIGN_ROUTE_NAME,params:{id:e.filename},query:e.$route.query}}},[i("gl-card",{staticClass:"js-design-list-item design-list-item gl-mb-0",attrs:{"header-class":"gl-p-0 gl-flex gl-grow gl-items-center gl-justify-center gl-overflow-hidden gl-relative gl-rounded-t-base","body-class":"gl-p-0 gl-flex gl-w-full gl-bg-default gl-py-3 gl-px-4 gl-rounded-base"},scopedSlots:e._u([{key:"header",fn:function(){return[e.icon.name?i("div",{staticClass:"gl-absolute gl-right-3 gl-top-3 gl-mr-1",attrs:{"data-testid":"design-event"}},[i("span",{attrs:{title:e.icon.tooltip,"aria-label":e.icon.tooltip}},[i("gl-icon",{class:e.icon.classes,attrs:{name:e.icon.name,size:16,"data-testid":"design-status-icon","data-qa-status":e.icon.name}})],1)]):e._e(),e._v(" "),i("gl-intersection-observer",{staticClass:"gl-flex gl-grow gl-items-center gl-justify-center",attrs:{"data-testid":"design-image","data-qa-filename":e.filename},on:{appear:e.onAppear}},[e.showLoadingSpinner?i("gl-loading-icon",{attrs:{size:"md"}}):e.showImageErrorIcon?i("gl-icon",{attrs:{name:"media-broken",size:32,variant:"subtle"}}):e._e(),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:e.showImage,expression:"showImage"}],staticClass:"design-img gl-mx-auto gl-block gl-max-h-full gl-w-auto gl-max-w-full",attrs:{src:e.imageLink,alt:e.filename,"data-testid":"design-img-"+e.id},on:{load:e.onImageLoad,error:e.onImageError}})],1)]},proxy:!0},{key:"default",fn:function(){return[i("div",{staticClass:"str-truncated-100 gl-flex gl-flex-col",attrs:{"data-testid":"design-file-name"}},[i("span",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"str-truncated-100 gl-font-semibold",attrs:{"data-testid":"design-img-filename-"+e.id,title:e.filename}},[e._v(e._s(e.filename))]),e._v(" "),e.updatedAt?i("span",{staticClass:"str-truncated-100"},[e._v("\n          "+e._s(e.__("Updated"))+" "),i("timeago",{attrs:{time:e.updatedAt,"tooltip-placement":"bottom"}})],1):e._e()]),e._v(" "),e.notesCount?i("div",{staticClass:"gl-ml-auto gl-flex gl-items-center gl-gap-2 gl-text-subtle"},[i("gl-icon",{attrs:{name:"comments"}}),e._v(" "),i("span",{attrs:{"aria-label":e.notesLabel}},[e._v("\n          "+e._s(e.notesCount)+"\n        ")])],1):e._e()]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,at={components:{GlButton:$e.a},directives:{GlTooltip:pi.a},props:{isSaving:{type:Boolean,required:!0}},methods:{openFileUpload(){this.$refs.fileUpload.click()},onFileUploadChange(e){this.$emit("upload",e.target.files)}},VALID_DESIGN_FILE_MIMETYPE:E},st=Object(o.a)(at,(function(){var e=this,i=e._self._c;return i("div",[i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.s__("DesignManagement|Adding a design with the same filename replaces the file in a new version."),disabled:e.isSaving,loading:e.isSaving,category:"secondary",variant:"confirm",size:"small"},on:{click:e.openFileUpload}},[e._v("\n    "+e._s(e.s__("DesignManagement|Upload designs"))+"\n  ")]),e._v(" "),i("input",{ref:"fileUpload",staticClass:"gl-hidden",attrs:{type:"file",name:"design_file",accept:e.$options.VALID_DESIGN_FILE_MIMETYPE.mimetype,multiple:""},on:{change:e.onFileUploadChange}})],1)}),[],!1,null,null,null).exports,ot=n("crTv"),rt=n("IZAz"),dt={components:{GlAvatar:Ii.a,GlCollapsibleListbox:ot.a,TimeAgo:yi.a},mixins:[xi],computed:{allVersionsList(){return this.allVersions.map((function({id:e,...i},n){return{value:e,index:n,...i}}))},queryVersion(){return this.$route.query.version},currentVersionIdx(){var e=this;if(!this.queryVersion)return 0;const i=this.allVersions.findIndex((function(i){return e.findVersionId(i.id)===e.queryVersion}));return-1!==i?i:0},dropdownText(){if(this.isLatestVersion)return Object(_.a)("Showing latest version");const e=this.allVersions.length-this.currentVersionIdx;return Object(_.h)(Object(_.a)("Showing version #%{versionNumber}"),{versionNumber:e})}},methods:{findVersionId:j,routeToVersion(e){this.$router.push({path:this.$route.path,query:{version:this.findVersionId(e)}})},versionText(e){const i=this.allVersions.length-e.index,n=this.findVersionId(e.value)===this.latestVersionId?Object(_.a)("Version %{versionNumber} (latest)"):Object(_.a)("Version %{versionNumber}");return Object(_.h)(n,{versionNumber:i})},getAvatarUrl(e){var i;return(null==e||null===(i=e.author)||void 0===i?void 0:i.avatarUrl)||rt.a},getAuthorName:e=>null==e?void 0:e.name}},lt=Object(o.a)(dt,(function(){var e=this,i=e._self._c;return i("gl-collapsible-listbox",{attrs:{"is-check-centered":"",items:e.allVersionsList,"toggle-text":e.dropdownText,selected:e.designsVersion,size:"small"},on:{select:e.routeToVersion},scopedSlots:e._u([{key:"list-item",fn:function({item:n}){return[i("span",{staticClass:"gl-flex gl-items-center gl-gap-3"},[i("gl-avatar",{staticClass:"gl-self-start",attrs:{alt:e.getAuthorName(n.author),size:32,src:e.getAvatarUrl(n)}}),e._v(" "),i("span",{staticClass:"gl-flex gl-flex-col"},[i("span",{staticClass:"gl-font-bold"},[e._v(e._s(e.versionText(n)))]),e._v(" "),n.author?i("span",{staticClass:"gl-mt-1 gl-text-sm gl-text-subtle"},[i("span",{staticClass:"gl-block"},[e._v(e._s(e.getAuthorName(n.author)))]),e._v(" "),n.createdAt?i("time-ago",{attrs:{time:n.createdAt,"tooltip-placement":"bottom"}}):e._e()],1):e._e()])],1)]}}])})}),[],!1,null,null,null).exports,ut=n("nOHD"),ct=n.n(ut),mt=n("UESP"),gt=n.n(mt);const vt={dropzoneDescriptionText:Object(_.a)("Drag your designs here or %{linkStart}click to upload%{linkEnd}."),designLoadingError:Object(_.a)("An error occurred while loading designs. Please try again.")};var ft={components:{GlAlert:_e.a,GlButton:$e.a,GlSprintf:Hi.a,GlLink:vi.a,CrudComponent:Jn.a,UploadButton:st,Design:tt,DesignDestroyer:Ve,DesignVersionDropdown:lt,DeleteButton:kn,DesignDropzone:Zn.a,VueDraggable:Kn.a},dropzoneProps:{dropToStartMessage:Object(_.a)("Drop your designs to start your upload."),isFileValid:O,validFileMimetypes:[E.mimetype]},mixins:[Fn],apollo:{permissions:{query:gn.a,variables(){return{fullPath:this.projectPath,iid:this.issueIid}},update:function(e){return e.project.issue.userPermissions}}},beforeRouteUpdate(e,i,n){this.selectedDesigns=[],n()},data:()=>({permissions:{createDesign:!1},filesToBeSaved:[],selectedDesigns:[],isDraggingDesign:!1,reorderedDesigns:null,isReorderingInProgress:!1,uploadError:null}),computed:{isLoading(){return this.$apollo.queries.designCollection.loading||this.$apollo.queries.permissions.loading},isSaving(){return this.filesToBeSaved.length>0},isMobile:()=>"xs"===Wn.a.getBreakpointSize(),canCreateDesign(){return this.permissions.createDesign},showToolbar(){return this.allVersions.length>0},hasDesigns(){return this.designs.length>0},hasSelectedDesigns(){return this.selectedDesigns.length>0},canDeleteDesigns(){return this.isLatestVersion&&this.hasSelectedDesigns},projectQueryBody(){return{query:Pe.a,variables:{fullPath:this.projectPath,iid:this.issueIid,atVersion:null}}},selectAllButtonText(){return this.hasSelectedDesigns?Object(_.g)("DesignManagement|Deselect all"):Object(_.g)("DesignManagement|Select all")},isDesignListEmpty(){return!this.isSaving&&!this.hasDesigns},isDesignCollectionCopying(){return this.designCollection&&"IN_PROGRESS"===this.designCollection.copyState},designDropzoneWrapperClass(){return this.isDesignListEmpty?this.showToolbar?"col-12 gl-mt-5":"col-12":"gl-flex-col col-md-6 col-lg-3 gl-mt-5"}},mounted(){"/designs"===this.$route.path&&this.$el.scrollIntoView()},beforeDestroy(){document.removeEventListener("paste",this.onDesignPaste)},methods:{resetFilesToBeSaved(){this.filesToBeSaved=[]},isValidDesignUpload(e){return!!this.canCreateDesign&&(!(e.length>10)||(this.uploadError=de,!1))},onUploadDesign(e){var i=this;if(this.filesToBeSaved=Array.from(e),!this.isValidDesignUpload(this.filesToBeSaved))return null;const n={optimisticResponse:q(this.filesToBeSaved),variables:{files:this.filesToBeSaved,projectPath:this.projectPath,iid:this.issueIid},context:{hasUpload:!0},mutation:gt.a,update:this.afterUploadDesign};return this.$apollo.mutate(n).then((function(e){return i.onUploadDesignDone(e)})).catch((function(){return i.onUploadDesignError()}))},afterUploadDesign(e,{data:{designManagementUpload:i}}){pe(e,i,this.projectQueryBody)},onUploadDesignDone(e){var i;const n=(null==e||null===(i=e.data)||void 0===i||null===(i=i.designManagementUpload)||void 0===i?void 0:i.skippedDesigns)||[],t=re(this.filesToBeSaved,n);t&&(this.uploadError=t),this.isLatestVersion||this.$router.push({name:"designs"}),this.resetFilesToBeSaved(),this.trackUploadDesign(e)},trackUploadDesign(e){var i;((null==e||null===(i=e.data)||void 0===i||null===(i=i.designManagementUpload)||void 0===i?void 0:i.designs)||[]).forEach((function(e){"CREATION"===e.event?Ln.b.event("projects:issues:design",Bn):"MODIFICATION"===e.event&&Ln.b.event("projects:issues:design",zn)}))},onUploadDesignError(){this.resetFilesToBeSaved(),this.uploadError=W},changeSelectedDesigns(e){this.isDesignSelected(e)?this.selectedDesigns=this.selectedDesigns.filter((function(i){return i!==e})):this.selectedDesigns.push(e)},toggleDesignsSelection(){this.hasSelectedDesigns?this.selectedDesigns=[]:this.selectedDesigns=this.designs.map((function(e){return e.filename}))},isDesignSelected(e){return this.selectedDesigns.includes(e)},isDesignToBeSaved(e){return this.filesToBeSaved.some((function(i){return i.name===e}))},canSelectDesign(e){return this.isLatestVersion&&this.canCreateDesign&&!this.isDesignToBeSaved(e)},onDesignDelete(){this.selectedDesigns=[],this.$route.query.version&&this.$router.push({name:"designs"})},onDesignDeleteError(){const e=oe(this.selectedDesigns.length);this.uploadError=e},onDesignDropzoneError(){this.uploadError=Y},onExistingDesignDropzoneChange(e,i){const n=Array.from(e);n.length>1?this.uploadError=Z:n.some((function({name:e}){return i===e}))?this.onUploadDesign(e):this.uploadError=J},onDesignPaste(e){var i=this;const{clipboardData:n}=e,t=Array.from(n.files);if(n&&t.length>0){if(!t.some(O))return;e.preventDefault();[...t].forEach((function(e){let n=Object(Xn.b)(e);n=Object(Xn.d)(e),n&&"image.png"!==n||(n=`design_${Date.now()}.png`);const t=new File([e],n);i.onUploadDesign([t])}))}},toggleOnPasteListener(){document.addEventListener("paste",this.onDesignPaste)},toggleOffPasteListener(){document.removeEventListener("paste",this.onDesignPaste)},designMoveVariables(e,i){const n={id:i.id};return e>0&&(n.previous=this.reorderedDesigns[e-1].id),e<this.reorderedDesigns.length-1&&(n.next=this.reorderedDesigns[e+1].id),n},reorderDesigns({moved:{newIndex:e,element:i}}){var n,t=this;this.isReorderingInProgress=!0,this.$apollo.mutate({mutation:ct.a,variables:this.designMoveVariables(e,i),update:function(e,{data:{designManagementMove:i}}){return he(e,i,t.projectQueryBody)},optimisticResponse:(n=this.reorderedDesigns,{__typename:"Mutation",designManagementMove:{__typename:"DesignManagementMovePayload",designCollection:{__typename:"DesignCollection",designs:{__typename:"DesignConnection",nodes:n}},errors:[]}})}).catch((function(){t.uploadError=ee})).finally((function(){t.isReorderingInProgress=!1}))},onDesignMove(e){this.reorderedDesigns=e},unsetUpdateError(){this.uploadError=null}},dragOptions:{animation:200,ghostClass:"gl-invisible"},i18n:vt},pt=[{name:"designs",path:"/",component:Object(o.a)(ft,(function(){var e=this,i=e._self._c;return i("div",{attrs:{"data-testid":"designs-root"},on:{mouseenter:e.toggleOnPasteListener,mouseleave:e.toggleOffPasteListener}},[i("crud-component",{staticClass:"!gl-mt-3",class:{"gl-border-0 gl-bg-transparent":!e.showToolbar},attrs:{title:e.s__("DesignManagement|Designs"),"header-class":{"gl-hidden":!e.showToolbar},"body-class":{"!gl-my-0":e.showToolbar&&!e.isLoading,"!gl-m-0 !gl-p-0":!e.showToolbar&&!e.isLoading},"is-loading":e.isLoading&&!e.error,"is-collapsible":"","data-testid":"design-toolbar-wrapper"},scopedSlots:e._u([e.showToolbar?{key:"title",fn:function(){return[i("design-version-dropdown")]},proxy:!0}:null,e.showToolbar?{key:"actions",fn:function(){return[e.canCreateDesign?i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasDesigns,expression:"hasDesigns"}],staticClass:"gl-flex gl-items-center gl-gap-3",attrs:{"data-testid":"design-selector-toolbar"}},[e.isLatestVersion?i("gl-button",{attrs:{category:"tertiary",size:"small","data-testid":"select-all-designs-button"},on:{click:e.toggleDesignsSelection}},[e._v(e._s(e.selectAllButtonText)+"\n        ")]):e._e(),e._v(" "),i("design-destroyer",{attrs:{filenames:e.selectedDesigns},on:{done:e.onDesignDelete,error:e.onDesignDeleteError},scopedSlots:e._u([{key:"default",fn:function({mutate:n,loading:t}){return[e.isLatestVersion?i("delete-button",{attrs:{"is-deleting":t,"button-variant":"default","button-size":"small","data-testid":"archive-button",loading:t,"has-selected-designs":e.hasSelectedDesigns},on:{"delete-selected-designs":function(e){return n()}}},[e._v("\n            "+e._s(e.s__("DesignManagement|Archive selected"))+"\n          ")]):e._e()]}}],null,!1,1029371420)}),e._v(" "),e.canCreateDesign?i("upload-button",{attrs:{"is-saving":e.isSaving,"data-testid":"design-upload-button"},on:{upload:e.onUploadDesign}}):e._e()],1):e._e()]},proxy:!0}:null],null,!0)},[e._v(" "),e._v(" "),e.uploadError?i("gl-alert",{staticClass:"gl-mt-3",attrs:{variant:"danger","data-testid":"design-update-alert"},on:{dismiss:e.unsetUpdateError}},[e._v("\n      "+e._s(e.uploadError)+"\n    ")]):e._e(),e._v(" "),i("div",[e.error?i("gl-alert",{attrs:{variant:"danger",dismissible:!1}},[e._v("\n        "+e._s(e.$options.i18n.designLoadingError)+"\n      ")]):e.isDesignCollectionCopying?i("span",{staticClass:"gl-inline-block gl-py-4 gl-text-subtle",attrs:{"data-testid":"design-collection-is-copying"}},[e._v("\n        "+e._s(e.s__("DesignManagement|Your designs are being copied and are on their way… Please refresh to update."))+"\n      ")]):i("vue-draggable",e._b({staticClass:"list-unstyled row",attrs:{value:e.designs,disabled:!e.isLatestVersion||e.isReorderingInProgress||e.isMobile,tag:"ol",draggable:".js-design-tile"},on:{start:function(i){e.isDraggingDesign=!0},end:function(i){e.isDraggingDesign=!1},change:e.reorderDesigns,input:e.onDesignMove},scopedSlots:e._u([{key:"header",fn:function(){return[e.canCreateDesign?i("li",{class:e.designDropzoneWrapperClass,attrs:{"data-testid":"design-dropzone-wrapper"}},[i("design-dropzone",e._b({class:{"design-list-item":!e.isDesignListEmpty},attrs:{"enable-drag-behavior":e.isDraggingDesign,"display-as-card":e.hasDesigns,"data-testid":"design-dropzone-content"},on:{change:e.onUploadDesign,error:e.onDesignDropzoneError},scopedSlots:e._u([{key:"upload-text",fn:function({openFileUpload:n}){return[i("gl-sprintf",{attrs:{message:e.$options.i18n.dropzoneDescriptionText},scopedSlots:e._u([{key:"link",fn:function({content:t}){return[i("gl-link",{on:{click:function(e){return e.stopPropagation(),n.apply(null,arguments)}}},[e._v(e._s(t))])]}}],null,!0)})]}}],null,!1,1883060201)},"design-dropzone",e.$options.dropzoneProps,!1))],1):e._e()]},proxy:!0}])},"vue-draggable",e.$options.dragOptions,!1),e._l(e.designs,(function(n){return i("li",{key:n.id,staticClass:"col-md-6 col-lg-3 js-design-tile gl-mt-5 gl-bg-transparent gl-shadow-none"},[i("design-dropzone",e._b({attrs:{"display-as-card":e.hasDesigns,"enable-drag-behavior":e.isDraggingDesign},on:{change:function(i){return e.onExistingDesignDropzoneChange(i,n.filename)},error:e.onDesignDropzoneError},scopedSlots:e._u([{key:"upload-text",fn:function({openFileUpload:n}){return[i("gl-sprintf",{attrs:{message:e.$options.i18n.dropzoneDescriptionText},scopedSlots:e._u([{key:"link",fn:function({content:t}){return[i("gl-link",{on:{click:function(e){return e.stopPropagation(),n.apply(null,arguments)}}},[e._v("\n                    "+e._s(t)+"\n                  ")])]}}],null,!0)})]}}],null,!0)},"design-dropzone",e.$options.dropzoneProps,!1),[i("design",e._b({staticClass:"gl-bg-white",attrs:{"is-uploading":e.isDesignToBeSaved(n.filename)}},"design",n,!1))],1),e._v(" "),e.canSelectDesign(n.filename)?i("input",{staticClass:"design-checkbox gl-absolute gl-left-6 gl-top-4 gl-ml-2",attrs:{type:"checkbox","data-testid":"design-checkbox","data-qa-design":n.filename},domProps:{checked:e.isDesignSelected(n.filename)},on:{change:function(i){return e.changeSelectedDesigns(n.filename)}}}):e._e()],1)})),0)],1),e._v(" "),i("router-view",{key:e.$route.fullPath})],1)],1)}),[],!1,null,null,null).exports,alias:"/designs"},{name:"design",path:"/designs/:id",component:Hn,beforeEnter({params:{id:e}},i,n){"string"==typeof e&&n()},props:function({params:{id:e}}){return{id:e}}}];t.default.use(Se.a);i.default=function(){const e=document.querySelector(".js-design-management"),{issueIid:i,projectPath:n,issuePath:o,registerPath:d,signInPath:l,newCommentTemplatePaths:u}=e.dataset,c=(m=o,new Se.a({base:m,mode:"history",routes:pt}));var m;return De.clients.defaultClient.cache.writeQuery({query:p.a,data:{activeDiscussion:{__typename:"ActiveDiscussion",id:null,source:null}}}),new t.default({el:e,name:"DesignRoot",router:c,apolloProvider:De,provide:{projectPath:n,issueIid:i,registerPath:d,signInPath:l,newCommentTemplatePaths:JSON.parse(u)},mounted(){Object(s.a)({mark:a.b,measures:[{name:a.c}]})},render:e=>e(r)})}},hLTK:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"destroyNote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DestroyNoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"destroyNote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:124}};n.loc.source={body:"mutation destroyNote($input: DestroyNoteInput!) {\n  destroyNote(input: $input) {\n    errors\n    note {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.destroyNote=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"destroyNote")},kjIf:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateActiveDiscussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"source"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateActiveDiscussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:125}};n.loc.source={body:"mutation updateActiveDiscussion($id: String, $source: String) {\n  updateActiveDiscussion(id: $id, source: $source) @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.updateActiveDiscussion=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"updateActiveDiscussion")},n2Xr:function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"toggleResolveDiscussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DiscussionID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resolve"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discussionToggleResolve"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"resolve"},value:{kind:"Variable",name:{kind:"Name",value:"resolve"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discussion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ResolvedStatus"},directives:[]},{kind:"Field",name:{kind:"Name",value:"noteable"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignTodoItem"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignNote"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:551}};t.loc.source={body:'#import "../fragments/design_note.fragment.graphql"\n#import "../fragments/discussion_resolved_status.fragment.graphql"\n#import "../fragments/design_todo_item.fragment.graphql"\n\nmutation toggleResolveDiscussion($id: DiscussionID!, $resolve: Boolean!) {\n  discussionToggleResolve(input: { id: $id, resolve: $resolve }) {\n    discussion {\n      id\n      ...ResolvedStatus\n      noteable {\n        ... on Design {\n          ...DesignTodoItem\n        }\n      }\n      notes {\n        nodes {\n          ...DesignNote\n        }\n      }\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)}))}t.definitions=t.definitions.concat(s(n("Vyjl").definitions)),t.definitions=t.definitions.concat(s(n("Z+Gl").definitions)),t.definitions=t.definitions.concat(s(n("d1ok").definitions));var o={};function r(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),o[e.name.value]=i}})),e.exports=t,e.exports.toggleResolveDiscussion=function(e,i){var n={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=o[i]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(i){var t=r(e,i);t&&n.definitions.push(t)})),n}(t,"toggleResolveDiscussion")},nOHD:function(e,i,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DesignManagementMove"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementDesignID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"previous"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementDesignID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"next"}},type:{kind:"NamedType",name:{kind:"Name",value:"DesignManagementDesignID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designManagementMove"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"previous"},value:{kind:"Variable",name:{kind:"Name",value:"previous"}}},{kind:"ObjectField",name:{kind:"Name",value:"next"},value:{kind:"Variable",name:{kind:"Name",value:"next"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"designs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DesignListItem"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:396}};t.loc.source={body:'#import "../fragments/design_list.fragment.graphql"\n\nmutation DesignManagementMove(\n  $id: DesignManagementDesignID!\n  $previous: DesignManagementDesignID\n  $next: DesignManagementDesignID\n) {\n  designManagementMove(input: { id: $id, previous: $previous, next: $next }) {\n    designCollection {\n      designs {\n        nodes {\n          ...DesignListItem\n        }\n      }\n    }\n    errors\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(n("zCng").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!a[i]&&(a[i]=!0,!0)})));var s={};function o(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),s[e.name.value]=i}})),e.exports=t,e.exports.DesignManagementMove=function(e,i){var n={kind:e.kind,definitions:[o(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=s[i]||new Set,a=new Set,r=new Set;for(t.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(s[e]||new Set).forEach((function(e){r.add(e)})))}))}return a.forEach((function(i){var t=o(e,i);t&&n.definitions.push(t)})),n}(t,"DesignManagementMove")},nt8V:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"permissions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createDesign"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:239}};n.loc.source={body:"query permissions($fullPath: ID!, $iid: String!) {\n  project(fullPath: $fullPath) {\n    __typename\n    id\n    issue(iid: $iid) {\n      __typename\n      id\n      userPermissions {\n        __typename\n        createDesign\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.permissions=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"permissions")},yU3k:function(e,i){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"VersionListItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DesignVersion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:114}};n.loc.source={body:"fragment VersionListItem on DesignVersion {\n  id\n  sha\n  createdAt\n  author {\n    id\n    name\n    avatarUrl\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.VersionListItem=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"VersionListItem")},zCng:function(e,i){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DesignListItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Design"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"event"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageV432x230"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"descriptionHtml"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserTodos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"state"},value:{kind:"EnumValue",value:"pending"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:199}};n.loc.source={body:"fragment DesignListItem on Design {\n  id\n  event\n  filename\n  notesCount\n  image\n  imageV432x230\n  description\n  descriptionHtml\n  currentUserTodos(state: pending) {\n    nodes {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}n.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,n){if("FragmentSpread"===i.kind)n.add(i.name.value);else if("VariableDefinition"===i.kind){var t=i.type;"NamedType"===t.kind&&n.add(t.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,n)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,n)})),i.definitions&&i.definitions.forEach((function(i){e(i,n)}))}(e,i),t[e.name.value]=i}})),e.exports=n,e.exports.DesignListItem=function(e,i){var n={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=t[i]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var d=r;r=new Set,d.forEach((function(e){o.has(e)||(o.add(e),(t[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(i){var t=a(e,i);t&&n.definitions.push(t)})),n}(n,"DesignListItem")}}]);
//# sourceMappingURL=design_management.eb7af9b2.chunk.js.map